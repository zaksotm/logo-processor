{"ast":null,"code":"var _jsxFileName = \"/Users/zakstratton/Documents/logo-processor/src/index.js\";\n//TODO/NOTES:\n//instead of storing results in state, use global array\n//maybe 2d array for properties? idk\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css'; //import './style/_buttons.scss';\n\nimport ImageUploader from 'react-images-upload';\nimport Jimp from 'jimp/es';\n\nvar jimp = require('jimp'); //Three global color data structures, one a map of objects, one an array,\n//and one a 2D array\n//TODO: Downscale to remove map of objects, unneeded\n\n\nvar colors = {\n  black: '#000000',\n  onyx: '#333538',\n  charcoal: '#5f6468',\n  concrete: '#97a0a7',\n  quicksilver: '#e4e5e6',\n  bleach: '#ffffff',\n  rich_brown: '#372820',\n  mushroom: '#716257',\n  sand: '#bab3a0',\n  natural: '#f9f4ec',\n  navy: '#081e2c',\n  ultramarine: '#29217d',\n  lagoon: '#003e66',\n  cerulean: '#0169ca',\n  cornflower: '#529afc',\n  cyan: '#009ff1',\n  peacock: '#01aec9',\n  aruba: '#9dfbe7',\n  lake: '#6ac4dd',\n  seafoam: '#4ca696',\n  reef: '#00947d',\n  teal: '#007171',\n  pine: '#2b4423',\n  kelly: '#21772f',\n  jade: '#14b25a',\n  turf: '#60933b',\n  lime: '#a0ce3e',\n  goldenrod: '#d5d03a',\n  yellow: '#fff71b',\n  sunflower: '#ffc938',\n  carmel: '#d8a15e',\n  clementine: '#ff9a23',\n  living_coral: '#fb686d',\n  persimmon: '#fd5130',\n  red_orange: '#db1d3c',\n  red: '#c50f2d',\n  burnt_orange: '#a84c28',\n  rust: '#763742',\n  maroon: '#581c32',\n  deep_pink: '#c40876',\n  hibiscus: '#de4b9b',\n  blush: '#fdaeca',\n  peach: '#f7bfab',\n  lavender: '#a08dd6',\n  iris: '#77479f',\n  purple: '#5d1e5c',\n  royal_purple: '#401e72',\n  moose: '#653c2c',\n  violet: '#6753b2',\n  green_apple: '#76c727',\n  carrot: '#fd673e',\n  lapis: '#3c2f8f',\n  parrot: '#2fd078',\n  french_blue: '#638ee4'\n};\nvar outputImages = new Array();\nvar firstrun = true;\nvar timer = 0; //TODO: Move initialization of arrays to seperate function\n\nvar colorsFreq = new Array(54);\nvar colorsArray = new Array(54); //Initialize colorsArray\n//load only hex values of colors into an array\n\nfor (var i = 0; i < colorsArray.length; i++) {\n  colorsArray[i] = Object.values(colors)[i];\n} //make colorsFreq into a 2D array\n\n\nfor (var i = 0; i < colorsFreq.length; i++) {\n  colorsFreq[i] = new Array(2);\n} //Initialize colorsFreq\n//copy array into new 2d array, starting with 0 for all frequencies\n\n\nfor (var i = 0; i < colorsFreq.length; i++) {\n  colorsFreq[i][0] = colorsArray[i];\n  colorsFreq[i][1] = 0;\n}\n\nvar nearestColor = require('nearest-color').from(colors); //initialize the default image\n\n\nconst src = require(\"./test2.jpg\"); //janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n//-------------------------------------------------------------\n//Main classes for displaying the output image array\n//-------------------------------------------------------------\n\n\nclass DisplayLogoImg extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"workDisplay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Source\", React.createElement(\"img\", {\n      className: \"workImage\",\n      src: this.props.output[0],\n      alt: \"Source\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Results\", React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[0],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[1],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[2],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[3],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[4],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[5],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[6],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[7],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[8],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[9],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[10],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[11],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[12],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[13],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[14],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[15],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[16],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[17],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[18],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[19],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[20],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[21],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[22],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[23],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[24],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      className: \"workImage\",\n      src: outputImages[25],\n      alt: \"Result #1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    })));\n  }\n\n} //-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\n\n\nclass Linkform extends React.Component {\n  render() {\n    return React.createElement(\"form\", {\n      className: \"myForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Dropbox Link:\", React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.props.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass ScaleForm extends React.Component {\n  render() {\n    return React.createElement(\"form\", {\n      className: \"myForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Resize X:\", React.createElement(\"input\", {\n      type: \"number\",\n      onChange: this.props.onChangeX,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Resize Y:\", React.createElement(\"input\", {\n      type: \"number\",\n      onChange: this.props.onChangeY,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), \"Leave blank to keep aspect ratio\");\n  }\n\n}\n\nclass StretchForm extends React.Component {\n  render() {\n    return React.createElement(\"form\", {\n      className: \"myForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Stretch 25% vertically?:\", React.createElement(\"input\", {\n      type: \"checkbox\",\n      onChange: this.props.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })));\n  }\n\n} //TODO: Change hardcoded max images for loading to variable\n\n\nclass ProcessButton extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"myButton\",\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Process Logo\"), \"Loaded \", this.props.imagesLoaded, \"/26 images\");\n  }\n\n}\n\nclass SubmitButton extends React.Component {\n  render() {\n    return React.createElement(\"button\", {\n      className: \"myButton\",\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"Submit Link\");\n  }\n\n}\n\nclass DownloadButton extends React.Component {\n  render() {\n    return React.createElement(\"button\", {\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"Download BMP\");\n  }\n\n}\n\nclass ColorChangeButton extends React.Component {\n  render() {\n    return React.createElement(\"button\", {\n      className: \"myButton\",\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"Replace Colors Only\");\n  }\n\n} //-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\n\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleProcessButtonClick = () => {\n      //Format: posterize[bool], posterize value, scale[bool], scaleX, scaleY, stretch[bool], greyscale[bool], numColors\n      //TODO: format better, into a function or something\n      //      these function calls end up being \"jumbled\", i think due to the async setState,\n      //      so it is difficult to know which is what output in the array\n\n      /*\n      //Scale : Color Correction\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Greyscale : Color Correction\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, true);\n      //Scale : Color Correction (Reduction)\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      //Scale : Posterize : Color Correction\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Posterize : Color Correction (Reduction)\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      */\n      //janky way to update display, every three seconds force update\n      //TODO: Do this right, revert to state storage?\n      setInterval(function () {\n        console.log(\"Forcing update\");\n        this.forceUpdate();\n      }.bind(this), 3000);\n    };\n\n    this.handleColorChangeButtonClick = i => {\n      //NOTE - THIS RETURNS THE VALUE, NO NEED FOR .VALUE\n      this.jimpLogoCreation(this.state.output[0], false, 0, false, 0, 0, false);\n    };\n\n    this.handleSubmitButtonClick = i => {\n      console.log(\"Submit Button Clicked\");\n      this.setState({\n        output: [this.state.dropboxLink]\n      });\n    };\n\n    this.handleDownloadButtonClick = i => {\n      console.log(\"Download Button Clicked\");\n    };\n\n    this.handleLinkChange = i => {\n      this.setState({\n        dropboxLink: \"https://cors-anywhere.herokuapp.com/\" + i.target.value.slice(0, -1) + \"1\"\n      });\n    };\n\n    this.state = {\n      //value that holds the path to default image, then the base64 data of render\n      //base64 used by Jimp, since it is a web-based app. Local files caused issues.\n      picture: src,\n      //Array of output pictures\n      output: [],\n      dropboxLink: \"\",\n      scaleX: 0,\n      scaleY: 0,\n      imagesLoaded: 0,\n      stretch: false\n    };\n    this.myRef = React.createRef(); //TODO: Bind these functions in their declaration, similar to handleX functions\n\n    this.onDrop = this.onDrop.bind(this);\n    this.onScaleFormChangeX = this.onScaleFormChangeX.bind(this);\n    this.onScaleFormChangeY = this.onScaleFormChangeY.bind(this);\n    this.onStretchFormChange = this.onStretchFormChange.bind(this);\n    this.onProcessButtonClick = this.onProcessButtonClick.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.output !== this.state.output) {//console.log(\"output state has changed: \" + this.state.output[0]);\n    }\n  } //-------------------------------------------------------------\n  //Functions to handle events when different buttons are clicked\n  //or values are changed\n  //-------------------------------------------------------------\n\n\n  //picture is an array passed from image uploader\n  //pull most recently uploaded picture from current session\n  //TODO: reformat these functions into handleDrop and handleLinkChange\n  onDrop(picture) {\n    //TODO: Insert function calls directly here to auto work on image\n    var localImg = URL.createObjectURL(picture[picture.length - 1]); //Set state for display\n\n    outputImages.push(localImg);\n    /*\n    this.setState({\n      output: [URL.createObjectURL(picture[picture.length - 1])],\n    });\n    */\n  }\n\n  onScaleFormChangeX(event) {\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleX: parseInt(event.target.value, 10)\n    });\n  }\n\n  onScaleFormChangeY(event) {\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleY: parseInt(event.target.value, 10)\n    });\n  }\n\n  onStretchFormChange(event) {\n    //console.log(event.target.checked);\n    this.setState({\n      stretch: event.target.checked\n    });\n  }\n\n  async onProcessButtonClick() {\n    //Scale image first\n    await this.jimpResize(outputImages[0], true, this.state.scaleX, this.state.scaleY, this.state.stretch); //Scale : Color Correction\n\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0); //Scale : Greyscale : Color Correction\n\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, true); //Scale : Color Correction (Reduction)\n\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 2); //Scale : Posterize : Color Correction\n\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2); //Scale : Posterize : Color Correction (Reduction)\n\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 2);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 2);\n    setInterval(function () {\n      console.log(\"Forcing update\");\n      this.forceUpdate();\n    }.bind(this), 3000);\n  } //-------------------------------------------------------------\n  //render functions for each visible element\n  //TODO: combine everything in the same div into one render function\n  //like buttons for control panel and such\n  //-------------------------------------------------------------\n\n\n  renderLogoImage() {\n    if (outputImages[0] !== undefined) return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }, React.createElement(DisplayLogoImg, {\n      picture: this.state.picture,\n      output: this.state.output,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }));\n  }\n\n  renderProcessButton(i) {\n    return React.createElement(ProcessButton, {\n      onClick: this.onProcessButtonClick,\n      imagesLoaded: this.state.imagesLoaded,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    });\n  }\n\n  renderSubmitButton(i) {\n    return React.createElement(SubmitButton, {\n      onClick: this.handleSubmitButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    });\n  }\n\n  renderDownloadButton(i) {\n    return React.createElement(DownloadButton, {\n      onClick: this.handleDownloadButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    });\n  }\n\n  renderColorChangeButton(i) {\n    return React.createElement(ColorChangeButton, {\n      onClick: this.handleColorChangeButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    });\n  }\n\n  renderScaleForm(i) {\n    return React.createElement(ScaleForm, {\n      onChangeX: this.onScaleFormChangeX,\n      onChangeY: this.onScaleFormChangeY,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509\n      },\n      __self: this\n    });\n  }\n\n  renderStretchForm(i) {\n    return React.createElement(StretchForm, {\n      onChange: this.onStretchFormChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    });\n  }\n\n  renderImageUploader() {\n    return React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose image\",\n      label: \"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\",\n      fileContainerStyle: {\n        backgroundColor: \"grey\"\n      },\n      singleImage: true,\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.gif', '.png', '.bmp'],\n      maxFileSize: 5242880,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    });\n  }\n\n  renderLinkForm() {\n    return React.createElement(Linkform, {\n      onChange: this.handleLinkChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 541\n      },\n      __self: this\n    });\n  } //-------------------------------------------------------------\n  //Functions to do the actual editing on the image\n  //-------------------------------------------------------------\n  //TODO: Update to using promises\n\n\n  jimpLogoCreation(path, posBool, pos, scale, scaleX, scaleY, stretch, grayscale, numColors) {\n    jimp.read(path, function (err, image) {\n      //create local array of colors and populate it from global\n      //TODO: Check if need to unallocate memory here\n      var localColors = new Array(54);\n\n      if (localColors[0] === undefined) {\n        for (var i = 0; i < colorsArray.length; i++) {\n          localColors[i] = colorsArray[i];\n        }\n      }\n\n      if (scale) {\n        if (scaleX === 0) {\n          if (scaleY === 0) {\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            //console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          } else {\n            //if only the Y vaue is input,\n            //console.log(\"Only found y value\");\n            image.resize(jimp.AUTO, scaleY);\n          }\n        } else if (scaleY === 0) {\n          if (scaleX === 0) {\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            //console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          } else {\n            //if only the X vaue is input,\n            //console.log(\"Only found x value\");\n            image.resize(scaleX, jimp.AUTO);\n          }\n        } //if both values are input\n        else {\n            //console.log(\"Found both size variables\");\n            image.resize(scaleX, scaleY);\n          }\n      }\n\n      if (stretch) {\n        var newHeight = Math.round(image.bitmap.height * 1.25);\n        image.resize(image.bitmap.width, newHeight); //console.log(\"Image stretched\");\n      }\n\n      if (posBool) image.posterize(pos);\n      if (grayscale) image.greyscale(); //initialize getNewColor with new colorsArray\n\n      var getFirstColor = nearestColor.from(colorsArray); //function to scan for most popular colors in image, only do on first run\n\n      if (firstrun) {\n        console.log('Calculating most popular colors....');\n        image.scan(0, 0, image.bitmap.width, image.bitmap.height, function (x, y, idx) {\n          //First log RGB value of current pixel, toString(16) converts\n          //into hex form, padStart for 1 digit values\n          //var position = [x, y];\n          //red\n          var red = this.bitmap.data[idx];\n          var redHex = red.toString(16).padStart(2, \"0\"); //green\n\n          var green = this.bitmap.data[idx + 1];\n          var greenHex = green.toString(16).padStart(2, \"0\"); //blue\n\n          var blue = this.bitmap.data[idx + 2];\n          var blueHex = blue.toString(16).padStart(2, \"0\"); //Run nearestColor on this pixel\n\n          var close = getFirstColor('#' + redHex + greenHex + blueHex); //future timesave: Don't run this every time, only log frequency\n          //the first time you parse the image\n\n          for (var i = 0; i < colorsFreq.length; i++) {\n            if (colorsFreq[i][0] === close) {\n              colorsFreq[i][1]++;\n            }\n          }\n        });\n        firstrun = false; //sort colorsFreq by frequency\n\n        colorsFreq.sort(sortFunction);\n\n        function sortFunction(a, b) {\n          if (a[1] === b[1]) {\n            return 0;\n          } else {\n            return a[1] > b[1] ? -1 : 1;\n          }\n        }\n      }\n\n      if (numColors !== undefined) {\n        localColors.length = numColors; //update colorsArray with new color order,\n        //important for removing correct colors when downsizing\n\n        for (var i = 0; i < numColors; i++) {\n          localColors[i] = colorsFreq[i][0];\n        } //console.log(\"localColors Updated: \" + localColors);\n\n      } //\n\n\n      var getNewColor = nearestColor.from(localColors); //Function to replace colors with our palette\n\n      image.scan(0, 0, image.bitmap.width, image.bitmap.height, function (x, y, idx) {\n        //First log RGB value of current pixel, toString(16) converts\n        //into hex form, padStart for 1 digit values\n        //var position = [x, y];\n        //red\n        var red = this.bitmap.data[idx];\n        var redHex = red.toString(16).padStart(2, \"0\"); //green\n\n        var green = this.bitmap.data[idx + 1];\n        var greenHex = green.toString(16).padStart(2, \"0\"); //blue\n\n        var blue = this.bitmap.data[idx + 2];\n        var blueHex = blue.toString(16).padStart(2, \"0\"); //Run nearestColor on this pixel\n\n        var close = getNewColor('#' + redHex + greenHex + blueHex);\n        var closeRed = parseInt(close.substr(1, 2), 16);\n        var closeGreen = parseInt(close.substr(3, 2), 16);\n        var closeBlue = parseInt(close.substr(5, 2), 16); //Change pixel colors into nearest from our palette\n        //red\n\n        this.bitmap.data[idx] = closeRed; //green\n\n        this.bitmap.data[idx + 1] = closeGreen; //blue\n\n        this.bitmap.data[idx + 2] = closeBlue;\n      }); //add result to output array\n\n      /*\n      let data = await image.getBase64Async(Jimp.MIME_BMP);\n      outputImages.push(data);\n      */\n\n      image.getBase64(Jimp.MIME_BMP, function (err, data) {\n        outputImages.push(data); //console.log(outputImages);\n      }.bind(this));\n      /*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState(prevState => ({\n          output: [...prevState.output, data],\n          imagesLoaded: prevState.imagesLoaded + 1,\n        }))\n        //console.log(\"image added \" + this.state.imagesLoaded);\n      }.bind(this));\n      */\n      //apply edited image to picture state\n\n      /*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n      */\n    }.bind(this));\n  }\n\n  async jimpResize(path, scale, scaleX, scaleY, stretch) {\n    let image = await jimp.read(path);\n\n    if (scale) {\n      if (scaleX === 0) {\n        if (scaleY === 0) {\n          //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n          console.log(\"Found no size variables\");\n          image.resize(100, jimp.AUTO, jimp.RESIZE_BEZIER);\n        } else {\n          //if only the Y vaue is input,\n          console.log(\"Only found y value\");\n          image.resize(jimp.AUTO, scaleY, jimp.RESIZE_BEZIER);\n        }\n      } else if (scaleY === 0) {\n        if (scaleX === 0) {\n          //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n          console.log(\"Found no size variables\");\n          image.resize(100, jimp.AUTO, jimp.RESIZE_BEZIER);\n        } else {\n          //if only the X vaue is input,\n          console.log(\"Only found x value\");\n          image.resize(scaleX, jimp.AUTO, jimp.RESIZE_BEZIER);\n        }\n      } //if both values are input\n      else {\n          console.log(\"Found both size variables\");\n          image.resize(scaleX, scaleY, jimp.RESIZE_BEZIER);\n        }\n    }\n\n    if (stretch) {\n      var newHeight = Math.round(image.bitmap.height * 1.25);\n      image.resize(image.bitmap.width, newHeight, jimp.RESIZE_BEZIER);\n      console.log(\"Image stretched\");\n    }\n\n    let data = await image.getBase64Async(Jimp.MIME_BMP);\n    outputImages[0] = data;\n  }\n\n  async jimpLogoCreationAsync(path, posBool, pos, grayscale, numColors) {\n    let image = await jimp.read(path);\n    console.log(\"Image read\"); //create local array of colors and populate it from global\n    //TODO: Check if need to unallocate memory here\n\n    var localColors = new Array(54);\n\n    if (localColors[0] === undefined) {\n      for (var i = 0; i < colorsArray.length; i++) {\n        localColors[i] = colorsArray[i];\n      }\n    }\n\n    console.log(\"localColors Initialized\");\n    if (posBool) image.posterize(pos);\n    if (grayscale) image.greyscale(); //initialize getNewColor with new colorsArray\n\n    var getFirstColor = nearestColor.from(colorsArray); //function to scan for most popular colors in image, only do on first run\n\n    if (firstrun) {\n      console.log('Calculating most popular colors....');\n      image.scan(0, 0, image.bitmap.width, image.bitmap.height, function (x, y, idx) {\n        //First log RGB value of current pixel, toString(16) converts\n        //into hex form, padStart for 1 digit values\n        //var position = [x, y];\n        //red\n        var red = this.bitmap.data[idx];\n        var redHex = red.toString(16).padStart(2, \"0\"); //green\n\n        var green = this.bitmap.data[idx + 1];\n        var greenHex = green.toString(16).padStart(2, \"0\"); //blue\n\n        var blue = this.bitmap.data[idx + 2];\n        var blueHex = blue.toString(16).padStart(2, \"0\"); //Run nearestColor on this pixel\n\n        var close = getFirstColor('#' + redHex + greenHex + blueHex); //future timesave: Don't run this every time, only log frequency\n        //the first time you parse the image\n\n        for (var i = 0; i < colorsFreq.length; i++) {\n          if (colorsFreq[i][0] === close) {\n            colorsFreq[i][1]++;\n          }\n        }\n      });\n      firstrun = false; //sort colorsFreq by frequency\n\n      colorsFreq.sort(sortFunction);\n\n      function sortFunction(a, b) {\n        if (a[1] === b[1]) {\n          return 0;\n        } else {\n          return a[1] > b[1] ? -1 : 1;\n        }\n      }\n    }\n\n    console.log(\"Colors Calculated\");\n\n    if (numColors !== undefined) {\n      localColors.length = numColors; //update colorsArray with new color order,\n      //important for removing correct colors when downsizing\n\n      for (var i = 0; i < numColors; i++) {\n        localColors[i] = colorsFreq[i][0];\n      } //console.log(\"localColors Updated: \" + localColors);\n\n    } //\n\n\n    var getNewColor = nearestColor.from(localColors); //Function to replace colors with our palette\n\n    console.log(\"Replacing colors...\");\n    image.scan(0, 0, image.bitmap.width, image.bitmap.height, function (x, y, idx) {\n      //First log RGB value of current pixel, toString(16) converts\n      //into hex form, padStart for 1 digit values\n      //var position = [x, y];\n      //red\n      var red = this.bitmap.data[idx];\n      var redHex = red.toString(16).padStart(2, \"0\"); //green\n\n      var green = this.bitmap.data[idx + 1];\n      var greenHex = green.toString(16).padStart(2, \"0\"); //blue\n\n      var blue = this.bitmap.data[idx + 2];\n      var blueHex = blue.toString(16).padStart(2, \"0\"); //Run nearestColor on this pixel\n\n      var close = getNewColor('#' + redHex + greenHex + blueHex);\n      var closeRed = parseInt(close.substr(1, 2), 16);\n      var closeGreen = parseInt(close.substr(3, 2), 16);\n      var closeBlue = parseInt(close.substr(5, 2), 16); //Change pixel colors into nearest from our palette\n      //red\n\n      this.bitmap.data[idx] = closeRed; //green\n\n      this.bitmap.data[idx + 1] = closeGreen; //blue\n\n      this.bitmap.data[idx + 2] = closeBlue;\n    });\n    console.log(\"Colors Replaced\"); //add result to output array\n\n    let data = await image.getBase64Async(Jimp.MIME_BMP);\n    outputImages.push(data);\n  } //-------------------------------------------------------------\n  //Final render of the application\n  //-------------------------------------------------------------\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 889\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panelDisplay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 890\n      },\n      __self: this\n    }, this.renderLinkForm(), this.renderSubmitButton(), this.renderImageUploader(), this.renderScaleForm(), this.renderStretchForm(), this.renderProcessButton(), this.renderColorChangeButton()), React.createElement(\"div\", {\n      className: \"workDisplay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 899\n      },\n      __self: this\n    }, this.renderLogoImage()));\n  }\n\n} //-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\n\n\nclass App extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 914\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 915\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 916\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"img-fields\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 918\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 919\n      },\n      __self: this\n    })));\n  }\n\n} //-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\n\n\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 932\n  },\n  __self: this\n}), document.getElementById('root'));","map":{"version":3,"sources":["/Users/zakstratton/Documents/logo-processor/src/index.js"],"names":["React","ReactDOM","ImageUploader","Jimp","jimp","require","colors","black","onyx","charcoal","concrete","quicksilver","bleach","rich_brown","mushroom","sand","natural","navy","ultramarine","lagoon","cerulean","cornflower","cyan","peacock","aruba","lake","seafoam","reef","teal","pine","kelly","jade","turf","lime","goldenrod","yellow","sunflower","carmel","clementine","living_coral","persimmon","red_orange","red","burnt_orange","rust","maroon","deep_pink","hibiscus","blush","peach","lavender","iris","purple","royal_purple","moose","violet","green_apple","carrot","lapis","parrot","french_blue","outputImages","Array","firstrun","timer","colorsFreq","colorsArray","i","length","Object","values","nearestColor","from","src","DisplayLogoImg","Component","render","props","output","Linkform","onChange","ScaleForm","onChangeX","onChangeY","StretchForm","ProcessButton","onClick","imagesLoaded","SubmitButton","DownloadButton","ColorChangeButton","Editor","constructor","handleProcessButtonClick","setInterval","console","log","forceUpdate","bind","handleColorChangeButtonClick","jimpLogoCreation","state","handleSubmitButtonClick","setState","dropboxLink","handleDownloadButtonClick","handleLinkChange","target","value","slice","picture","scaleX","scaleY","stretch","myRef","createRef","onDrop","onScaleFormChangeX","onScaleFormChangeY","onStretchFormChange","onProcessButtonClick","componentDidUpdate","prevProps","prevState","localImg","URL","createObjectURL","push","event","parseInt","checked","jimpResize","jimpLogoCreationAsync","renderLogoImage","undefined","renderProcessButton","renderSubmitButton","renderDownloadButton","renderColorChangeButton","renderScaleForm","renderStretchForm","renderImageUploader","backgroundColor","renderLinkForm","path","posBool","pos","scale","grayscale","numColors","read","err","image","localColors","resize","AUTO","newHeight","Math","round","bitmap","height","width","posterize","greyscale","getFirstColor","scan","x","y","idx","data","redHex","toString","padStart","green","greenHex","blue","blueHex","close","sort","sortFunction","a","b","getNewColor","closeRed","substr","closeGreen","closeBlue","getBase64","MIME_BMP","RESIZE_BEZIER","getBase64Async","App","document","getElementById"],"mappings":"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","sourcesContent":["//TODO/NOTES:\n//instead of storing results in state, use global array\n//maybe 2d array for properties? idk\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\n//import './style/_buttons.scss';\nimport ImageUploader from 'react-images-upload';\nimport Jimp from 'jimp/es';\n\nvar jimp = require('jimp');\n\n\n//Three global color data structures, one a map of objects, one an array,\n//and one a 2D array\n//TODO: Downscale to remove map of objects, unneeded\nvar colors = {\n  black: '#000000',\n  onyx: '#333538',\n  charcoal: '#5f6468',\n  concrete: '#97a0a7',\n  quicksilver: '#e4e5e6',\n  bleach: '#ffffff',\n  rich_brown: '#372820',\n  mushroom: '#716257',\n  sand: '#bab3a0',\n  natural: '#f9f4ec',\n  navy: '#081e2c',\n  ultramarine: '#29217d',\n  lagoon: '#003e66',\n  cerulean: '#0169ca',\n  cornflower: '#529afc',\n  cyan: '#009ff1',\n  peacock: '#01aec9',\n  aruba: '#9dfbe7',\n  lake: '#6ac4dd',\n  seafoam: '#4ca696',\n  reef: '#00947d',\n  teal: '#007171',\n  pine: '#2b4423',\n  kelly: '#21772f',\n  jade: '#14b25a',\n  turf: '#60933b',\n  lime: '#a0ce3e',\n  goldenrod: '#d5d03a',\n  yellow: '#fff71b',\n  sunflower: '#ffc938',\n  carmel: '#d8a15e',\n  clementine: '#ff9a23',\n  living_coral: '#fb686d',\n  persimmon: '#fd5130',\n  red_orange: '#db1d3c',\n  red: '#c50f2d',\n  burnt_orange: '#a84c28',\n  rust: '#763742',\n  maroon: '#581c32',\n  deep_pink: '#c40876',\n  hibiscus: '#de4b9b',\n  blush: '#fdaeca',\n  peach: '#f7bfab',\n  lavender: '#a08dd6',\n  iris: '#77479f',\n  purple: '#5d1e5c',\n  royal_purple: '#401e72',\n  moose: '#653c2c',\n  violet: '#6753b2',\n  green_apple: '#76c727',\n  carrot: '#fd673e',\n  lapis: '#3c2f8f',\n  parrot: '#2fd078',\n  french_blue: '#638ee4',\n};\n\nvar outputImages = new Array();\nvar firstrun = true;\nvar timer = 0;\n\n//TODO: Move initialization of arrays to seperate function\nvar colorsFreq = new Array(54);\nvar colorsArray = new Array(54);\n\n//Initialize colorsArray\n//load only hex values of colors into an array\nfor (var i = 0; i < colorsArray.length; i++){\n  colorsArray[i] = Object.values(colors)[i];\n}\n\n//make colorsFreq into a 2D array\nfor (var i = 0; i < colorsFreq.length; i++){\n  colorsFreq[i] = new Array(2);\n}\n\n//Initialize colorsFreq\n//copy array into new 2d array, starting with 0 for all frequencies\nfor (var i = 0; i < colorsFreq.length; i++){\n  colorsFreq[i][0] = colorsArray[i];\n  colorsFreq[i][1] = 0;\n}\n\nvar nearestColor = require('nearest-color').from(colors);\n\n//initialize the default image\nconst src = require(\"./test2.jpg\");\n//janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n\n//-------------------------------------------------------------\n//Main classes for displaying the output image array\n//-------------------------------------------------------------\nclass DisplayLogoImg extends React.Component{\n  render(){\n    return(\n      <div className=\"workDisplay\">\n        <div className=\"gallery\">\n        Source\n          <img className=\"workImage\" src={this.props.output[0]} alt=\"Source\" />\n        </div>\n        <div className=\"gallery\">\n        Results\n        {/*\n          <img className=\"workImage\" src={this.props.output[1]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[2]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[2]} alt=\"Result #3\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #4\" />\n          <img className=\"workImage\" src={this.props.output[4]} alt=\"Result #5\" />\n          <img className=\"workImage\" src={this.props.output[5]} alt=\"Result #6\" />\n          <img className=\"workImage\" src={this.props.output[6]} alt=\"Result #7\" />\n          <img className=\"workImage\" src={this.props.output[7]} alt=\"Result #8\" />\n          <img className=\"workImage\" src={this.props.output[8]} alt=\"Result #9\" />\n          <img className=\"workImage\" src={this.props.output[9]} alt=\"Result #10\" />\n          <img className=\"workImage\" src={this.props.output[10]} alt=\"Result #11\" />\n          <img className=\"workImage\" src={this.props.output[11]} alt=\"Result #12\" />\n          <img className=\"workImage\" src={this.props.output[12]} alt=\"Result #13\" />\n          <img className=\"workImage\" src={this.props.output[13]} alt=\"Result #14\" />\n          <img className=\"workImage\" src={this.props.output[14]} alt=\"Result #15\" />\n          <img className=\"workImage\" src={this.props.output[15]} alt=\"Result #16\" />\n          <img className=\"workImage\" src={this.props.output[16]} alt=\"Result #17\" />\n          <img className=\"workImage\" src={this.props.output[17]} alt=\"Result #18\" />\n          <img className=\"workImage\" src={this.props.output[18]} alt=\"Result #19\" />\n          <img className=\"workImage\" src={this.props.output[19]} alt=\"Result #20\" />\n          <img className=\"workImage\" src={this.props.output[20]} alt=\"Result #21\" />\n          <img className=\"workImage\" src={this.props.output[21]} alt=\"Result #22\" />\n          <img className=\"workImage\" src={this.props.output[22]} alt=\"Result #23\" />\n          <img className=\"workImage\" src={this.props.output[23]} alt=\"Result #24\" />\n          <img className=\"workImage\" src={this.props.output[24]} alt=\"Result #25\" />\n          <img className=\"workImage\" src={this.props.output[25]} alt=\"Result #26\" />\n        */}\n          <img className=\"workImage\" src={outputImages[0]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[1]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[2]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[3]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[4]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[5]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[6]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[7]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[8]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[9]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[10]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[11]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[12]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[13]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[14]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[15]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[16]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[17]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[18]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[19]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[20]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[21]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[22]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[23]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[24]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={outputImages[25]} alt=\"Result #1\" />\n        </div>\n      </div>\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\n\nclass Linkform extends React.Component {\n  render() {\n    return (\n      <form className=\"myForm\">\n        <label>\n          Dropbox Link:\n          <input type=\"text\" onChange={this.props.onChange}/>\n        </label>\n      </form>\n    );\n  }\n}\n\nclass ScaleForm extends React.Component{\n  render(){\n    return(\n      <form className=\"myForm\">\n        <label>\n          Resize X:\n          <input type=\"number\" onChange={this.props.onChangeX} />\n        </label>\n        <label>\n          Resize Y:\n          <input type=\"number\" onChange={this.props.onChangeY} />\n        </label>\n        Leave blank to keep aspect ratio\n      </form>\n    )\n  }\n}\n\nclass StretchForm extends React.Component{\n  render(){\n    return(\n      <form className=\"myForm\">\n        <label>\n          Stretch 25% vertically?:\n          <input type=\"checkbox\" onChange={this.props.onChange} />\n        </label>\n      </form>\n    )\n  }\n}\n\n//TODO: Change hardcoded max images for loading to variable\nclass ProcessButton extends React.Component{\n  render(){\n    return(\n      <div>\n        <button className=\"myButton\" onClick={() => this.props.onClick()}>Process Logo</button>\n        Loaded {this.props.imagesLoaded}/26 images\n      </div>\n    )\n  }\n}\n\nclass SubmitButton extends React.Component{\n  render(){\n    return(\n      <button className=\"myButton\" onClick={() => this.props.onClick()}>Submit Link</button>\n    )\n  }\n}\n\nclass DownloadButton extends React.Component{\n  render(){\n    return(\n      <button onClick={() => this.props.onClick()}>Download BMP</button>\n    )\n  }\n}\n\nclass ColorChangeButton extends React.Component{\n  render(){\n    return(\n      <button className=\"myButton\" onClick={() => this.props.onClick()}>Replace Colors Only</button>\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\nclass Editor extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      //value that holds the path to default image, then the base64 data of render\n      //base64 used by Jimp, since it is a web-based app. Local files caused issues.\n      picture: src,\n      //Array of output pictures\n      output: [],\n      dropboxLink: \"\",\n      scaleX: 0,\n      scaleY: 0,\n      imagesLoaded: 0,\n      stretch: false,\n    };\n    this.myRef = React.createRef();\n    //TODO: Bind these functions in their declaration, similar to handleX functions\n    this.onDrop = this.onDrop.bind(this);\n    this.onScaleFormChangeX = this.onScaleFormChangeX.bind(this);\n    this.onScaleFormChangeY = this.onScaleFormChangeY.bind(this);\n    this.onStretchFormChange = this.onStretchFormChange.bind(this);\n    this.onProcessButtonClick = this.onProcessButtonClick.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevState.output !== this.state.output){\n      //console.log(\"output state has changed: \" + this.state.output[0]);\n    }\n  }\n\n  //-------------------------------------------------------------\n  //Functions to handle events when different buttons are clicked\n  //or values are changed\n  //-------------------------------------------------------------\n  handleProcessButtonClick = () => {\n      //Format: posterize[bool], posterize value, scale[bool], scaleX, scaleY, stretch[bool], greyscale[bool], numColors\n      //TODO: format better, into a function or something\n      //      these function calls end up being \"jumbled\", i think due to the async setState,\n      //      so it is difficult to know which is what output in the array\n\n      /*\n      //Scale : Color Correction\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Greyscale : Color Correction\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, true);\n      //Scale : Color Correction (Reduction)\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      //Scale : Posterize : Color Correction\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Posterize : Color Correction (Reduction)\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(outputImages[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      */\n      //janky way to update display, every three seconds force update\n      //TODO: Do this right, revert to state storage?\n      setInterval(function() {\n        console.log(\"Forcing update\");\n        this.forceUpdate();\n      }.bind(this), 3000);\n  }\n\n  handleColorChangeButtonClick = (i) => {\n    //NOTE - THIS RETURNS THE VALUE, NO NEED FOR .VALUE\n    this.jimpLogoCreation(this.state.output[0], false, 0, false, 0, 0, false);\n\n  }\n\n  handleSubmitButtonClick = (i) => {\n    console.log(\"Submit Button Clicked\");\n    this.setState({\n      output: [this.state.dropboxLink],\n    });\n  }\n\n  handleDownloadButtonClick = (i) => {\n    console.log(\"Download Button Clicked\");\n  }\n\n  handleLinkChange = (i) => {\n    this.setState({\n      dropboxLink: \"https://cors-anywhere.herokuapp.com/\" + i.target.value.slice(0, -1) + \"1\",\n    });\n  }\n\n  //picture is an array passed from image uploader\n  //pull most recently uploaded picture from current session\n  //TODO: reformat these functions into handleDrop and handleLinkChange\n\n  onDrop(picture){\n    //TODO: Insert function calls directly here to auto work on image\n    var localImg = URL.createObjectURL(picture[picture.length - 1]);\n    //Set state for display\n    outputImages.push(localImg);\n    /*\n    this.setState({\n      output: [URL.createObjectURL(picture[picture.length - 1])],\n    });\n    */\n  }\n\n  onScaleFormChangeX(event){\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleX: parseInt(event.target.value, 10)\n    });\n  }\n\n  onScaleFormChangeY(event){\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleY: parseInt(event.target.value, 10)\n    });\n  }\n\n  onStretchFormChange(event){\n    //console.log(event.target.checked);\n    this.setState({\n      stretch: event.target.checked,\n    });\n  }\n\n  async onProcessButtonClick(){\n    //Scale image first\n    await this.jimpResize(outputImages[0], true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n    //Scale : Color Correction\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0);\n    //Scale : Greyscale : Color Correction\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, true);\n    //Scale : Color Correction (Reduction)\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], false, 0, false, 2);\n    //Scale : Posterize : Color Correction\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2);\n    //Scale : Posterize : Color Correction (Reduction)\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 7, false, 2);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 5, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 3, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 5);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 4);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 3);\n    await this.jimpLogoCreationAsync(outputImages[0], true, 2, false, 2);\n\n    setInterval(function() {\n      console.log(\"Forcing update\");\n      this.forceUpdate();\n    }.bind(this), 3000);\n\n  }\n\n  //-------------------------------------------------------------\n  //render functions for each visible element\n  //TODO: combine everything in the same div into one render function\n  //like buttons for control panel and such\n  //-------------------------------------------------------------\n\n  renderLogoImage(){\n    if (outputImages[0] !== undefined)\n    return (\n      <div>\n        <DisplayLogoImg\n          picture={this.state.picture}\n          output={this.state.output}\n        />\n      </div>\n    )\n  }\n\n  renderProcessButton(i){\n    return(\n      <ProcessButton\n        onClick={this.onProcessButtonClick}\n        imagesLoaded={this.state.imagesLoaded}\n      />\n    )\n  }\n\n  renderSubmitButton(i){\n    return(\n      <SubmitButton\n        onClick={this.handleSubmitButtonClick}\n      />\n    )\n  }\n\n  renderDownloadButton(i){\n    return(\n      <DownloadButton\n        onClick={this.handleDownloadButtonClick}\n      />\n    )\n  }\n\n  renderColorChangeButton(i){\n    return(\n      <ColorChangeButton\n        onClick={this.handleColorChangeButtonClick}\n      />\n    )\n  }\n\n  renderScaleForm(i){\n    return(\n      <ScaleForm\n        onChangeX={this.onScaleFormChangeX}\n        onChangeY={this.onScaleFormChangeY}\n      />\n    )\n  }\n\n  renderStretchForm(i){\n    return(\n      <StretchForm\n        onChange={this.onStretchFormChange}\n      />\n    )\n  }\n\n  renderImageUploader(){\n    return(\n      <ImageUploader\n        withIcon={true}\n        buttonText='Choose image'\n        label=\"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\"\n        fileContainerStyle={{backgroundColor: \"grey\"}}\n        singleImage={true}\n        onChange={this.onDrop}\n        imgExtension={['.jpg', '.gif', '.png', '.bmp']}\n        maxFileSize={5242880}\n      />\n    )\n  }\n\n  renderLinkForm(){\n    return(\n      <Linkform onChange={this.handleLinkChange}/>\n    )\n  }\n\n\n  //-------------------------------------------------------------\n  //Functions to do the actual editing on the image\n  //-------------------------------------------------------------\n  //TODO: Update to using promises\n  jimpLogoCreation(path, posBool, pos, scale, scaleX, scaleY, stretch, grayscale, numColors){\n    jimp.read(path, function(err, image) {\n      //create local array of colors and populate it from global\n      //TODO: Check if need to unallocate memory here\n      var localColors = new Array(54);\n      if (localColors[0] === undefined){\n        for (var i = 0; i < colorsArray.length; i++){\n          localColors[i] = colorsArray[i];\n        }\n      }\n\n      if (scale){\n        if (scaleX === 0){\n          if (scaleY === 0){\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            //console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          }\n          else {\n            //if only the Y vaue is input,\n            //console.log(\"Only found y value\");\n            image.resize(jimp.AUTO, scaleY);\n          }\n        }\n        else if (scaleY === 0){\n          if (scaleX === 0){\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            //console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          }\n          else {\n            //if only the X vaue is input,\n            //console.log(\"Only found x value\");\n            image.resize(scaleX, jimp.AUTO);\n          }\n        }\n        //if both values are input\n        else {\n          //console.log(\"Found both size variables\");\n          image.resize(scaleX, scaleY);\n        }\n      }\n      if (stretch){\n        var newHeight = Math.round(image.bitmap.height * 1.25);\n        image.resize(image.bitmap.width, newHeight);\n        //console.log(\"Image stretched\");\n      }\n\n      if (posBool)\n        image.posterize(pos);\n      if (grayscale)\n        image.greyscale();\n\n      //initialize getNewColor with new colorsArray\n      var getFirstColor = nearestColor.from(colorsArray);\n\n      //function to scan for most popular colors in image, only do on first run\n      if (firstrun){\n        console.log('Calculating most popular colors....');\n        image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n          //First log RGB value of current pixel, toString(16) converts\n          //into hex form, padStart for 1 digit values\n          //var position = [x, y];\n          //red\n          var red = this.bitmap.data[idx];\n          var redHex = red.toString(16).padStart(2, \"0\");\n          //green\n          var green = this.bitmap.data[idx + 1];\n          var greenHex = green.toString(16).padStart(2, \"0\");\n          //blue\n          var blue = this.bitmap.data[idx + 2];\n          var blueHex = blue.toString(16).padStart(2, \"0\");\n\n          //Run nearestColor on this pixel\n          var close = getFirstColor('#' + redHex + greenHex + blueHex);\n\n          //future timesave: Don't run this every time, only log frequency\n          //the first time you parse the image\n          for (var i = 0; i < colorsFreq.length; i++){\n            if (colorsFreq[i][0] === close){\n              colorsFreq[i][1]++;\n            }\n          }\n        })\n        firstrun = false;\n\n        //sort colorsFreq by frequency\n        colorsFreq.sort(sortFunction);\n        function sortFunction(a, b){\n          if (a[1] === b[1]) {\n            return 0;\n          }\n          else {\n            return (a[1] > b[1]) ? -1 : 1;\n          }\n        }\n      }\n\n      if (numColors !== undefined){\n        localColors.length = numColors;\n        //update colorsArray with new color order,\n        //important for removing correct colors when downsizing\n        for (var i = 0; i < numColors; i++){\n          localColors[i] = colorsFreq[i][0];\n        }\n        //console.log(\"localColors Updated: \" + localColors);\n      }\n\n      //\n      var getNewColor = nearestColor.from(localColors);\n\n      //Function to replace colors with our palette\n      image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n        //First log RGB value of current pixel, toString(16) converts\n        //into hex form, padStart for 1 digit values\n        //var position = [x, y];\n        //red\n        var red = this.bitmap.data[idx];\n        var redHex = red.toString(16).padStart(2, \"0\");\n        //green\n        var green = this.bitmap.data[idx + 1];\n        var greenHex = green.toString(16).padStart(2, \"0\");\n        //blue\n        var blue = this.bitmap.data[idx + 2];\n        var blueHex = blue.toString(16).padStart(2, \"0\");\n\n        //Run nearestColor on this pixel\n        var close = getNewColor('#' + redHex + greenHex + blueHex);\n\n        var closeRed = parseInt(close.substr(1,2), 16);\n        var closeGreen = parseInt(close.substr(3,2), 16);\n        var closeBlue = parseInt(close.substr(5,2), 16);\n\n        //Change pixel colors into nearest from our palette\n        //red\n        this.bitmap.data[idx] = closeRed;\n        //green\n        this.bitmap.data[idx + 1] = closeGreen;\n        //blue\n        this.bitmap.data[idx + 2] = closeBlue;\n      })\n\n      //add result to output array\n      /*\n      let data = await image.getBase64Async(Jimp.MIME_BMP);\n      outputImages.push(data);\n      */\n\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        outputImages.push(data);\n        //console.log(outputImages);\n      }.bind(this));\n\n      /*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState(prevState => ({\n          output: [...prevState.output, data],\n          imagesLoaded: prevState.imagesLoaded + 1,\n        }))\n        //console.log(\"image added \" + this.state.imagesLoaded);\n      }.bind(this));\n      */\n\n      //apply edited image to picture state\n      /*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n      */\n    }.bind(this));\n  }\n\n  async jimpResize(path, scale, scaleX, scaleY, stretch){\n    let image = await jimp.read(path);\n\n    if (scale){\n      if (scaleX === 0){\n        if (scaleY === 0){\n          //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n          console.log(\"Found no size variables\");\n          image.resize(100, jimp.AUTO, jimp.RESIZE_BEZIER);\n        }\n        else {\n          //if only the Y vaue is input,\n          console.log(\"Only found y value\");\n          image.resize(jimp.AUTO, scaleY, jimp.RESIZE_BEZIER);\n        }\n      }\n      else if (scaleY === 0){\n        if (scaleX === 0){\n          //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n          console.log(\"Found no size variables\");\n          image.resize(100, jimp.AUTO, jimp.RESIZE_BEZIER);\n        }\n        else {\n          //if only the X vaue is input,\n          console.log(\"Only found x value\");\n          image.resize(scaleX, jimp.AUTO, jimp.RESIZE_BEZIER);\n        }\n      }\n      //if both values are input\n      else {\n        console.log(\"Found both size variables\");\n        image.resize(scaleX, scaleY, jimp.RESIZE_BEZIER);\n      }\n    }\n    if (stretch){\n      var newHeight = Math.round(image.bitmap.height * 1.25);\n      image.resize(image.bitmap.width, newHeight, jimp.RESIZE_BEZIER);\n      console.log(\"Image stretched\");\n    }\n\n    let data = await image.getBase64Async(Jimp.MIME_BMP);\n    outputImages[0] = data;\n  }\n\n  async jimpLogoCreationAsync(path, posBool, pos, grayscale, numColors){\n    let image = await jimp.read(path);\n    console.log(\"Image read\");\n\n    //create local array of colors and populate it from global\n    //TODO: Check if need to unallocate memory here\n    var localColors = new Array(54);\n    if (localColors[0] === undefined){\n      for (var i = 0; i < colorsArray.length; i++){\n        localColors[i] = colorsArray[i];\n      }\n    }\n    console.log(\"localColors Initialized\");\n    if (posBool)\n      image.posterize(pos);\n    if (grayscale)\n      image.greyscale();\n\n    //initialize getNewColor with new colorsArray\n    var getFirstColor = nearestColor.from(colorsArray);\n\n    //function to scan for most popular colors in image, only do on first run\n    if (firstrun){\n      console.log('Calculating most popular colors....');\n      image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n        //First log RGB value of current pixel, toString(16) converts\n        //into hex form, padStart for 1 digit values\n        //var position = [x, y];\n        //red\n        var red = this.bitmap.data[idx];\n        var redHex = red.toString(16).padStart(2, \"0\");\n        //green\n        var green = this.bitmap.data[idx + 1];\n        var greenHex = green.toString(16).padStart(2, \"0\");\n        //blue\n        var blue = this.bitmap.data[idx + 2];\n        var blueHex = blue.toString(16).padStart(2, \"0\");\n\n        //Run nearestColor on this pixel\n        var close = getFirstColor('#' + redHex + greenHex + blueHex);\n\n        //future timesave: Don't run this every time, only log frequency\n        //the first time you parse the image\n        for (var i = 0; i < colorsFreq.length; i++){\n          if (colorsFreq[i][0] === close){\n            colorsFreq[i][1]++;\n          }\n        }\n      })\n      firstrun = false;\n\n      //sort colorsFreq by frequency\n      colorsFreq.sort(sortFunction);\n      function sortFunction(a, b){\n        if (a[1] === b[1]) {\n          return 0;\n        }\n        else {\n          return (a[1] > b[1]) ? -1 : 1;\n        }\n      }\n    }\n\n    console.log(\"Colors Calculated\");\n\n    if (numColors !== undefined){\n      localColors.length = numColors;\n      //update colorsArray with new color order,\n      //important for removing correct colors when downsizing\n      for (var i = 0; i < numColors; i++){\n        localColors[i] = colorsFreq[i][0];\n      }\n      //console.log(\"localColors Updated: \" + localColors);\n    }\n\n    //\n    var getNewColor = nearestColor.from(localColors);\n\n    //Function to replace colors with our palette\n    console.log(\"Replacing colors...\");\n    image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n      //First log RGB value of current pixel, toString(16) converts\n      //into hex form, padStart for 1 digit values\n      //var position = [x, y];\n      //red\n      var red = this.bitmap.data[idx];\n      var redHex = red.toString(16).padStart(2, \"0\");\n      //green\n      var green = this.bitmap.data[idx + 1];\n      var greenHex = green.toString(16).padStart(2, \"0\");\n      //blue\n      var blue = this.bitmap.data[idx + 2];\n      var blueHex = blue.toString(16).padStart(2, \"0\");\n\n      //Run nearestColor on this pixel\n      var close = getNewColor('#' + redHex + greenHex + blueHex);\n\n      var closeRed = parseInt(close.substr(1,2), 16);\n      var closeGreen = parseInt(close.substr(3,2), 16);\n      var closeBlue = parseInt(close.substr(5,2), 16);\n\n      //Change pixel colors into nearest from our palette\n      //red\n      this.bitmap.data[idx] = closeRed;\n      //green\n      this.bitmap.data[idx + 1] = closeGreen;\n      //blue\n      this.bitmap.data[idx + 2] = closeBlue;\n    })\n\n    console.log(\"Colors Replaced\");\n\n    //add result to output array\n    let data = await image.getBase64Async(Jimp.MIME_BMP);\n    outputImages.push(data);\n  }\n  //-------------------------------------------------------------\n  //Final render of the application\n  //-------------------------------------------------------------\n  render() {\n    return (\n      <div>\n        <div className=\"panelDisplay\">\n          {this.renderLinkForm()}\n          {this.renderSubmitButton()}\n          {this.renderImageUploader()}\n          {this.renderScaleForm()}\n          {this.renderStretchForm()}\n          {this.renderProcessButton()}\n          {this.renderColorChangeButton()}\n        </div>\n        <div className=\"workDisplay\">\n          {this.renderLogoImage()}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <div className=\"app-img\">\n          <Editor />\n        </div>\n        <div className=\"img-fields\">\n          <div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}