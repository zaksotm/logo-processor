{"ast":null,"code":"var _jsxFileName = \"/Users/zakstratton/Documents/logo-processor/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css'; //import './style/_buttons.scss';\n\nimport ImageUploader from 'react-images-upload';\nimport Jimp from 'jimp/es';\n\nvar jimp = require('jimp'); //initialize the default image\n\n\nconst src = require(\"./blank-white.png\");\n\nconst myBMP = require(\"./default.bmp\"); //janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n//-------------------------------------------------------------\n//Main classes for displaying the image we are editing\n//as well as the resulting images after edits\n//-------------------------------------------------------------\n\n\nclass DisplayLogoImg extends React.Component {\n  render() {\n    return React.createElement(\"img\", {\n      className: \"workImage\",\n      src: this.props.picture,\n      alt: \"Uploaded logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    });\n  }\n\n} //-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\n\n\nclass Linkform extends React.Component {\n  render() {\n    return React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, \"Dropbox Link:\", React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.props.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    })));\n  }\n\n}\n\nclass DebugButton extends React.Component {\n  render() {\n    return React.createElement(\"button\", {\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Debug\");\n  }\n\n}\n\nclass DownloadButton extends React.Component {\n  render() {\n    return React.createElement(\"button\", {\n      onClick: () => this.props.onClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Download BMP\");\n  }\n\n} //-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\n\n\nclass Editor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDebugButtonClick = i => {\n      this.jimpPosterize(this.state.picture);\n    };\n\n    this.handleDownloadButtonClick = i => {\n      console.log(\"Download Button Clicked\");\n    };\n\n    this.state = {\n      //CURRENTLY NOT USED: values for pixelization and posterize alteration\n      pixelValue: 0,\n      thresholdValue: 0,\n      //value that holds the path to default image, then the base64 data of render\n      //base64 used by Jimp, since it is a web-based app. Local files caused issues.\n      picture: src,\n      bmpPicture: myBMP,\n      //preset and chassis for bitmap generation\n      preset: 0,\n      chassis: 0,\n      //Locations for crop rectangle\n      //TODO: Change names to something less global\n      width: 100,\n      height: 100,\n      top: 20,\n      left: 20,\n      rotateAngle: 0,\n      //Scale values for scale operation\n      scaleX: 0,\n      scaleY: 0,\n      //X Y coordinates of logo on Bitmap\n      xCoord: 0,\n      yCoord: 0,\n      //logo image width and height, mainly for displaying and stretch functionality\n      logoWidth: 0,\n      logoHeight: 0,\n      //show the crop tool or not\n      showCrop: 0\n    };\n    this.myRef = React.createRef(); //TODO: Bind these functions in their declaration, similar to handleX functions\n\n    this.onDrop = this.onDrop.bind(this);\n    this.onLinkChange = this.onLinkChange.bind(this);\n    this.onScaleFormChangeX = this.onScaleFormChangeX.bind(this);\n    this.onScaleFormChangeY = this.onScaleFormChangeY.bind(this);\n    this.jimpCrop = this.jimpCrop.bind(this);\n    this.jimpScale = this.jimpScale.bind(this);\n    this.jimpResize = this.jimpResize.bind(this);\n    this.jimpPixelate = this.jimpPixelate.bind(this);\n    this.jimpUpdateSize = this.jimpUpdateSize.bind(this);\n  } //-------------------------------------------------------------\n  //Functions to handle events when different buttons are clicked\n  //or values are changed\n  //-------------------------------------------------------------\n\n\n  //picture is an array passed from image uploader\n  //pull most recently uploaded picture from current session\n  //TODO: reformat these functions into handleDrop and handleLinkChange\n  onDrop(picture) {\n    var localImg = URL.createObjectURL(picture[picture.length - 1]);\n    this.jimpScale(localImg, 200, 200); //This is very janky, waits 1 second before updating while picture stateis being changed\n    //TODO: Figure out some sort of wait or confirmation,\n    //      this will introduce problems with varying connection speeds\n\n    setTimeout(function () {\n      this.jimpUpdateSize(this.state.picture);\n    }.bind(this), 1000);\n    this.setState({\n      picture: URL.createObjectURL(picture[picture.length - 1])\n    });\n  }\n\n  onLinkChange(event) {\n    //janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n    this.setState({\n      picture: \"https://cors-anywhere.herokuapp.com/\" + event.target.value.slice(0, -1) + \"1\"\n    });\n  } //-------------------------------------------------------------\n  //render functions for each visible element\n  //TODO: combine everything in the same div into one render function\n  //like buttons for control panel and such\n  //-------------------------------------------------------------\n\n\n  renderLogoImage() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(DisplayLogoImg, {\n      picture: this.state.picture,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }));\n  }\n\n  renderDebugButton(i) {\n    return React.createElement(DebugButton, {\n      onClick: this.handleDebugButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    });\n  }\n\n  renderDownloadButton(i) {\n    return React.createElement(DownloadButton, {\n      onClick: this.handleDownloadButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    });\n  }\n\n  renderImageUploader() {\n    return React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose image\",\n      label: \"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\",\n      fileContainerStyle: {\n        backgroundColor: \"grey\"\n      },\n      singleImage: true,\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.gif', '.png', '.bmp'],\n      maxFileSize: 5242880,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    });\n  }\n\n  renderLinkForm() {\n    return React.createElement(Linkform, {\n      onChange: this.onLinkChange,\n      onSubmit: this.onLinkSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    });\n  } //-------------------------------------------------------------\n  //Functions to do the actual editing on the image\n  //TODO: update functions to take in a string for which state they\n  //are going to change, I.E. this.state.picture or this.state.bmpPicture\n  //-------------------------------------------------------------\n\n\n  jimpUpdateSize(path) {\n    var localX = 0;\n    var localY = 0;\n    jimp.read(path, function (err, image) {\n      localX = image.bitmap.width;\n      localY = image.bitmap.height;\n      this.setState({\n        logoWidth: localX,\n        logoHeight: localY\n      });\n    }.bind(this));\n  }\n\n  jimpScale(path, x, y) {\n    jimp.read(path, function (err, image) {\n      image.scaleToFit(x, y);\n      image.getBase64(Jimp.AUTO, function (err, data) {\n        this.setState({\n          picture: data\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpResize(path, x, y) {\n    jimp.read(path, function (err, image) {\n      image.resize(x, y);\n      image.getBase64(Jimp.AUTO, function (err, data) {\n        this.setState({\n          picture: data\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpResizeBMP(path, x, y) {\n    jimp.read(path, function (err, image) {\n      image.resize(x, y);\n      image.getBase64(Jimp.AUTO, function (err, data) {\n        this.setState({\n          bmpPicture: data\n        });\n      }.bind(this));\n    }.bind(this));\n  } //map logo onto bitmap according to preset\n  //TODO: adjust for each preset\n\n\n  jimpMap(path1, path2) {\n    jimp.read(this.state.bmpPicture, function (err, bmpImage) {\n      jimp.read(this.state.picture, function (err, logo) {\n        bmpImage.composite(logo, 20, 20);\n        bmpImage.getBase64(Jimp.AUTO, function (err, data) {\n          this.setState({\n            bmpPicture: data\n          });\n        }.bind(this));\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpPixelate(path, x) {\n    jimp.read(path, function (err, image) {\n      image.pixelate(x);\n      image.getBase64(Jimp.AUTO, function (err, data) {\n        this.setState({\n          picture: data\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpPosterize(path) {\n    jimp.read(path, function (err, image) {\n      image.posterize(5);\n      image.getBase64(Jimp.AUTO, function (err, data) {\n        this.setState({\n          picture: data\n        });\n      }.bind(this));\n    }.bind(this));\n  } //-------------------------------------------------------------\n  //Final render of the application\n  //-------------------------------------------------------------\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"workDisplay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, this.renderLogoImage()), React.createElement(\"div\", {\n      className: \"panelDisplay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, this.renderLinkForm(), this.renderImageUploader(), this.renderDebugButton()));\n  }\n\n} //-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\n\n\nclass App extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-img\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(Editor, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"img-fields\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    })));\n  }\n\n} //-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\n\n\nReactDOM.render(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 335\n  },\n  __self: this\n}), document.getElementById('root'));","map":{"version":3,"sources":["/Users/zakstratton/Documents/logo-processor/src/index.js"],"names":["React","ReactDOM","ImageUploader","Jimp","jimp","require","src","myBMP","DisplayLogoImg","Component","render","props","picture","Linkform","onChange","DebugButton","onClick","DownloadButton","Editor","constructor","handleDebugButtonClick","i","jimpPosterize","state","handleDownloadButtonClick","console","log","pixelValue","thresholdValue","bmpPicture","preset","chassis","width","height","top","left","rotateAngle","scaleX","scaleY","xCoord","yCoord","logoWidth","logoHeight","showCrop","myRef","createRef","onDrop","bind","onLinkChange","onScaleFormChangeX","onScaleFormChangeY","jimpCrop","jimpScale","jimpResize","jimpPixelate","jimpUpdateSize","localImg","URL","createObjectURL","length","setTimeout","setState","event","target","value","slice","renderLogoImage","renderDebugButton","renderDownloadButton","renderImageUploader","backgroundColor","renderLinkForm","onLinkSubmit","path","localX","localY","read","err","image","bitmap","x","y","scaleToFit","getBase64","AUTO","data","resize","jimpResizeBMP","jimpMap","path1","path2","bmpImage","logo","composite","pixelate","posterize","App","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\n//import './style/_buttons.scss';\nimport ImageUploader from 'react-images-upload';\nimport Jimp from 'jimp/es';\n\nvar jimp = require('jimp');\n\n//initialize the default image\nconst src = require(\"./blank-white.png\");\nconst myBMP = require(\"./default.bmp\");\n//janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n\n//-------------------------------------------------------------\n//Main classes for displaying the image we are editing\n//as well as the resulting images after edits\n//-------------------------------------------------------------\nclass DisplayLogoImg extends React.Component{\n  render(){\n    return(\n      <img className=\"workImage\" src={this.props.picture} alt=\"Uploaded logo\" />\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\n\nclass Linkform extends React.Component {\n  render() {\n    return (\n      <form>\n        <label>\n          Dropbox Link:\n          <input type=\"text\" onChange={this.props.onChange} />\n        </label>\n      </form>\n    );\n  }\n}\n\nclass DebugButton extends React.Component{\n  render(){\n    return(\n      <button onClick={() => this.props.onClick()}>Debug</button>\n    )\n  }\n}\n\nclass DownloadButton extends React.Component{\n  render(){\n    return(\n      <button onClick={() => this.props.onClick()}>Download BMP</button>\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\nclass Editor extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      //CURRENTLY NOT USED: values for pixelization and posterize alteration\n      pixelValue: 0,\n      thresholdValue: 0,\n      //value that holds the path to default image, then the base64 data of render\n      //base64 used by Jimp, since it is a web-based app. Local files caused issues.\n      picture: src,\n      bmpPicture: myBMP,\n      //preset and chassis for bitmap generation\n      preset: 0,\n      chassis: 0,\n      //Locations for crop rectangle\n      //TODO: Change names to something less global\n      width: 100,\n      height: 100,\n      top: 20,\n      left: 20,\n      rotateAngle: 0,\n      //Scale values for scale operation\n      scaleX: 0,\n      scaleY: 0,\n      //X Y coordinates of logo on Bitmap\n      xCoord: 0,\n      yCoord: 0,\n      //logo image width and height, mainly for displaying and stretch functionality\n      logoWidth: 0,\n      logoHeight: 0,\n      //show the crop tool or not\n      showCrop: 0\n    };\n    this.myRef = React.createRef();\n    //TODO: Bind these functions in their declaration, similar to handleX functions\n    this.onDrop = this.onDrop.bind(this);\n    this.onLinkChange = this.onLinkChange.bind(this);\n    this.onScaleFormChangeX = this.onScaleFormChangeX.bind(this);\n    this.onScaleFormChangeY = this.onScaleFormChangeY.bind(this);\n    this.jimpCrop = this.jimpCrop.bind(this);\n    this.jimpScale = this.jimpScale.bind(this);\n    this.jimpResize = this.jimpResize.bind(this);\n    this.jimpPixelate = this.jimpPixelate.bind(this);\n    this.jimpUpdateSize = this.jimpUpdateSize.bind(this);\n  }\n\n  //-------------------------------------------------------------\n  //Functions to handle events when different buttons are clicked\n  //or values are changed\n  //-------------------------------------------------------------\n  handleDebugButtonClick = (i) => {\n    this.jimpPosterize(this.state.picture);\n  }\n\n  handleDownloadButtonClick = (i) => {\n    console.log(\"Download Button Clicked\");\n  }\n\n  //picture is an array passed from image uploader\n  //pull most recently uploaded picture from current session\n  //TODO: reformat these functions into handleDrop and handleLinkChange\n  onDrop(picture){\n    var localImg = URL.createObjectURL(picture[picture.length - 1]);\n    this.jimpScale(localImg, 200, 200);\n    //This is very janky, waits 1 second before updating while picture stateis being changed\n    //TODO: Figure out some sort of wait or confirmation,\n    //      this will introduce problems with varying connection speeds\n    setTimeout(function () {\n      this.jimpUpdateSize(this.state.picture);\n    }.bind(this), 1000);\n    this.setState({\n      picture: URL.createObjectURL(picture[picture.length - 1]),\n    });\n  }\n\n  onLinkChange(event){\n    //janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n    this.setState({\n      picture: \"https://cors-anywhere.herokuapp.com/\" + event.target.value.slice(0, -1) + \"1\"\n    });\n  }\n\n  //-------------------------------------------------------------\n  //render functions for each visible element\n  //TODO: combine everything in the same div into one render function\n  //like buttons for control panel and such\n  //-------------------------------------------------------------\n\n  renderLogoImage(){\n    return (\n      <div>\n        <DisplayLogoImg\n          picture={this.state.picture}\n        />\n      </div>\n    )\n  }\n\n  renderDebugButton(i){\n    return(\n      <DebugButton\n        onClick={this.handleDebugButtonClick}\n      />\n    )\n  }\n\n  renderDownloadButton(i){\n    return(\n      <DownloadButton\n        onClick={this.handleDownloadButtonClick}\n      />\n    )\n  }\n\n  renderImageUploader(){\n    return(\n      <ImageUploader\n        withIcon={true}\n        buttonText='Choose image'\n        label=\"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\"\n        fileContainerStyle={{backgroundColor: \"grey\"}}\n        singleImage={true}\n        onChange={this.onDrop}\n        imgExtension={['.jpg', '.gif', '.png', '.bmp']}\n        maxFileSize={5242880}\n      />\n    )\n  }\n\n  renderLinkForm(){\n    return(\n      <Linkform onChange={this.onLinkChange} onSubmit={this.onLinkSubmit}/>\n    )\n  }\n\n\n  //-------------------------------------------------------------\n  //Functions to do the actual editing on the image\n  //TODO: update functions to take in a string for which state they\n  //are going to change, I.E. this.state.picture or this.state.bmpPicture\n  //-------------------------------------------------------------\n  jimpUpdateSize(path){\n    var localX = 0;\n    var localY = 0;\n    jimp.read(path, function(err, image) {\n      localX = image.bitmap.width;\n      localY = image.bitmap.height;\n      this.setState({\n        logoWidth: localX,\n        logoHeight: localY,\n      });\n    }.bind(this));\n  }\n\n  jimpScale(path, x, y){\n    jimp.read(path, function(err, image) {\n      image.scaleToFit(x,y);\n      image.getBase64(Jimp.AUTO, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpResize(path, x, y){\n    jimp.read(path, function(err, image) {\n      image.resize(x,y);\n      image.getBase64(Jimp.AUTO, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpResizeBMP(path, x, y){\n    jimp.read(path, function(err, image) {\n      image.resize(x,y);\n      image.getBase64(Jimp.AUTO, function(err, data){\n        this.setState({\n          bmpPicture: data,\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  //map logo onto bitmap according to preset\n  //TODO: adjust for each preset\n  jimpMap(path1, path2){\n    jimp.read(this.state.bmpPicture, function(err, bmpImage) {\n      jimp.read(this.state.picture, function(err, logo) {\n        bmpImage.composite(logo, 20, 20);\n        bmpImage.getBase64(Jimp.AUTO, function(err, data){\n          this.setState({\n            bmpPicture: data,\n          });\n        }.bind(this));\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpPixelate(path, x){\n    jimp.read(path, function(err, image) {\n      image.pixelate(x);\n      image.getBase64(Jimp.AUTO, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  jimpPosterize(path){\n    jimp.read(path, function(err, image) {\n      image.posterize(5);\n      image.getBase64(Jimp.AUTO, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n    }.bind(this));\n  }\n\n  //-------------------------------------------------------------\n  //Final render of the application\n  //-------------------------------------------------------------\n  render() {\n    return (\n      <div>\n        <div className=\"workDisplay\">\n          {this.renderLogoImage()}\n        </div>\n        <div className=\"panelDisplay\">\n          {this.renderLinkForm()}\n          {this.renderImageUploader()}\n          {this.renderDebugButton()}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <div className=\"app-img\">\n          <Editor />\n        </div>\n        <div className=\"img-fields\">\n          <div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}