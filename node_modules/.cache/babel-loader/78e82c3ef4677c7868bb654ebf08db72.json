{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _utif = _interopRequireDefault(require(\"utif\"));\n\nvar MIME_TYPE = 'image/tiff';\n\nvar _default = function _default() {\n  return {\n    mime: (0, _defineProperty2[\"default\"])({}, MIME_TYPE, ['tiff', 'tif']),\n    constants: {\n      MIME_TIFF: MIME_TYPE\n    },\n    decoders: (0, _defineProperty2[\"default\"])({}, MIME_TYPE, function (data) {\n      var ifds = _utif[\"default\"].decode(data);\n\n      var page = ifds[0];\n\n      _utif[\"default\"].decodeImages(data, ifds);\n\n      var rgba = _utif[\"default\"].toRGBA8(page);\n\n      return {\n        data: Buffer.from(rgba),\n        width: page.t256[0],\n        height: page.t257[0]\n      };\n    }),\n    encoders: (0, _defineProperty2[\"default\"])({}, MIME_TYPE, function (image) {\n      var tiff = _utif[\"default\"].encodeImage(image.bitmap.data, image.bitmap.width, image.bitmap.height);\n\n      return Buffer.from(tiff);\n    })\n  };\n};\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../src/index.js"],"names":["MIME_TYPE","mime","constants","MIME_TIFF","decoders","ifds","UTIF","page","rgba","data","Buffer","width","height","encoders","tiff","image"],"mappings":";;;;;;;;;;;AAAA,IAAA,KAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AAEA,IAAMA,SAAS,GAAf,YAAA;;eAEe,SAAA,QAAA,GAAA;AAAA,SAAO;AACpBC,IAAAA,IAAI,EAAA,CAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA,SAAA,EAAiB,CAAA,MAAA,EADD,KACC,CAAjB,CADgB;AAGpBC,IAAAA,SAAS,EAAE;AACTC,MAAAA,SAAS,EAAEH;AADF,KAHS;AAOpBI,IAAAA,QAAQ,EAAA,CAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA,SAAA,EACO,UAAA,IAAA,EAAQ;AACnB,UAAMC,IAAI,GAAGC,KAAAA,CAAAA,SAAAA,CAAAA,CAAAA,MAAAA,CAAb,IAAaA,CAAb;;AACA,UAAMC,IAAI,GAAGF,IAAI,CAAjB,CAAiB,CAAjB;;AACAC,MAAAA,KAAAA,CAAAA,SAAAA,CAAAA,CAAAA,YAAAA,CAAAA,IAAAA,EAAAA,IAAAA;;AACA,UAAME,IAAI,GAAGF,KAAAA,CAAAA,SAAAA,CAAAA,CAAAA,OAAAA,CAAb,IAAaA,CAAb;;AAEA,aAAO;AACLG,QAAAA,IAAI,EAAEC,MAAM,CAANA,IAAAA,CADD,IACCA,CADD;AAELC,QAAAA,KAAK,EAAEJ,IAAI,CAAJA,IAAAA,CAFF,CAEEA,CAFF;AAGLK,QAAAA,MAAM,EAAEL,IAAI,CAAJA,IAAAA,CAAAA,CAAAA;AAHH,OAAP;AAdgB,KAOZ,CAPY;AAsBpBM,IAAAA,QAAQ,EAAA,CAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA,SAAA,EACO,UAAA,KAAA,EAAS;AACpB,UAAMC,IAAI,GAAGR,KAAAA,CAAAA,SAAAA,CAAAA,CAAAA,WAAAA,CACXS,KAAK,CAALA,MAAAA,CADWT,IAAAA,EAEXS,KAAK,CAALA,MAAAA,CAFWT,KAAAA,EAGXS,KAAK,CAALA,MAAAA,CAHF,MAAaT,CAAb;;AAMA,aAAOI,MAAM,CAANA,IAAAA,CAAP,IAAOA,CAAP;AARI,KAAA;AAtBY,GAAP","sourcesContent":["import UTIF from 'utif';\n\nconst MIME_TYPE = 'image/tiff';\n\nexport default () => ({\n  mime: { [MIME_TYPE]: ['tiff', 'tif'] },\n\n  constants: {\n    MIME_TIFF: MIME_TYPE\n  },\n\n  decoders: {\n    [MIME_TYPE]: data => {\n      const ifds = UTIF.decode(data);\n      const page = ifds[0];\n      UTIF.decodeImages(data, ifds);\n      const rgba = UTIF.toRGBA8(page);\n\n      return {\n        data: Buffer.from(rgba),\n        width: page.t256[0],\n        height: page.t257[0]\n      };\n    }\n  },\n\n  encoders: {\n    [MIME_TYPE]: image => {\n      const tiff = UTIF.encodeImage(\n        image.bitmap.data,\n        image.bitmap.width,\n        image.bitmap.height\n      );\n\n      return Buffer.from(tiff);\n    }\n  }\n});\n"]},"metadata":{},"sourceType":"script"}