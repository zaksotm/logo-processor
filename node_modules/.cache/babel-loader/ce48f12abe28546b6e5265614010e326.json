{"ast":null,"code":"import _toConsumableArray from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _assertThisInitialized from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/zakstratton/Documents/logo-processor/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ReactDOM from'react-dom';import'./style/index.css';//import './style/_buttons.scss';\nimport ImageUploader from'react-images-upload';import Jimp from'jimp/es';var jimp=require('jimp');//Three global color data structures, one a map of objects, one an array,\n//and one a 2D array\n//TODO: Downscale to remove map of objects, unneeded\nvar colors={black:'#000000',onyx:'#333538',charcoal:'#5f6468',concrete:'#97a0a7',quicksilver:'#e4e5e6',bleach:'#ffffff',rich_brown:'#372820',mushroom:'#716257',sand:'#bab3a0',natural:'#f9f4ec',navy:'#081e2c',ultramarine:'#29217d',lagoon:'#003e66',cerulean:'#0169ca',cornflower:'#529afc',cyan:'#009ff1',peacock:'#01aec9',aruba:'#9dfbe7',lake:'#6ac4dd',seafoam:'#4ca696',reef:'#00947d',teal:'#007171',pine:'#2b4423',kelly:'#21772f',jade:'#14b25a',turf:'#60933b',lime:'#a0ce3e',goldenrod:'#d5d03a',yellow:'#fff71b',sunflower:'#ffc938',carmel:'#d8a15e',clementine:'#ff9a23',living_coral:'#fb686d',persimmon:'#fd5130',red_orange:'#db1d3c',red:'#c50f2d',burnt_orange:'#a84c28',rust:'#763742',maroon:'#581c32',deep_pink:'#c40876',hibiscus:'#de4b9b',blush:'#fdaeca',peach:'#f7bfab',lavender:'#a08dd6',iris:'#77479f',purple:'#5d1e5c',royal_purple:'#401e72',moose:'#653c2c',violet:'#6753b2',green_apple:'#76c727',carrot:'#fd673e',lapis:'#3c2f8f',parrot:'#2fd078',french_blue:'#638ee4'};var firstrun=true;//TODO: Move initialization of arrays to seperate function\nvar colorsFreq=new Array(54);var colorsArray=new Array(54);//Initialize colorsArray\n//load only hex values of colors into an array\nfor(var i=0;i<colorsArray.length;i++){colorsArray[i]=Object.values(colors)[i];}//make colorsFreq into a 2D array\nfor(var i=0;i<colorsFreq.length;i++){colorsFreq[i]=new Array(2);}//Initialize colorsFreq\n//copy array into new 2d array, starting with 0 for all frequencies\nfor(var i=0;i<colorsFreq.length;i++){colorsFreq[i][0]=colorsArray[i];colorsFreq[i][1]=0;}var nearestColor=require('nearest-color').from(colors);//initialize the default image\nvar src=require(\"./test2.jpg\");//janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n//-------------------------------------------------------------\n//Main classes for displaying the output image array\n//-------------------------------------------------------------\nvar DisplayLogoImg=/*#__PURE__*/function(_React$Component){_inherits(DisplayLogoImg,_React$Component);function DisplayLogoImg(){_classCallCheck(this,DisplayLogoImg);return _possibleConstructorReturn(this,_getPrototypeOf(DisplayLogoImg).apply(this,arguments));}_createClass(DisplayLogoImg,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"workDisplay\"},React.createElement(\"div\",{className:\"gallery\"},\"Source\",React.createElement(\"img\",{className:\"workImage\",src:this.props.output[0],alt:\"Source\"})),React.createElement(\"div\",{className:\"gallery\"},\"Results\",React.createElement(\"img\",{className:\"workImage\",src:this.props.output[1],alt:\"Result #1\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[2],alt:\"Result #1\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[3],alt:\"Result #1\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[3],alt:\"Result #1\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[2],alt:\"Result #3\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[3],alt:\"Result #4\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[4],alt:\"Result #5\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[5],alt:\"Result #6\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[6],alt:\"Result #7\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[7],alt:\"Result #8\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[8],alt:\"Result #9\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[9],alt:\"Result #10\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[10],alt:\"Result #11\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[11],alt:\"Result #12\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[12],alt:\"Result #13\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[13],alt:\"Result #14\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[14],alt:\"Result #15\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[15],alt:\"Result #16\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[16],alt:\"Result #17\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[17],alt:\"Result #18\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[18],alt:\"Result #19\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[19],alt:\"Result #20\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[20],alt:\"Result #21\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[21],alt:\"Result #22\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[22],alt:\"Result #23\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[23],alt:\"Result #24\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[24],alt:\"Result #25\"}),React.createElement(\"img\",{className:\"workImage\",src:this.props.output[25],alt:\"Result #26\"})));}}]);return DisplayLogoImg;}(React.Component);//-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\nvar Linkform=/*#__PURE__*/function(_React$Component2){_inherits(Linkform,_React$Component2);function Linkform(){_classCallCheck(this,Linkform);return _possibleConstructorReturn(this,_getPrototypeOf(Linkform).apply(this,arguments));}_createClass(Linkform,[{key:\"render\",value:function render(){return React.createElement(\"form\",{className:\"myForm\"},React.createElement(\"label\",null,\"Dropbox Link:\",React.createElement(\"input\",{type:\"text\",onChange:this.props.onChange})));}}]);return Linkform;}(React.Component);var ScaleForm=/*#__PURE__*/function(_React$Component3){_inherits(ScaleForm,_React$Component3);function ScaleForm(){_classCallCheck(this,ScaleForm);return _possibleConstructorReturn(this,_getPrototypeOf(ScaleForm).apply(this,arguments));}_createClass(ScaleForm,[{key:\"render\",value:function render(){return React.createElement(\"form\",{className:\"myForm\"},React.createElement(\"label\",null,\"Resize X:\",React.createElement(\"input\",{type:\"number\",onChange:this.props.onChangeX})),React.createElement(\"label\",null,\"Resize Y:\",React.createElement(\"input\",{type:\"number\",onChange:this.props.onChangeY})),\"Leave blank to keep aspect ratio\");}}]);return ScaleForm;}(React.Component);var StretchForm=/*#__PURE__*/function(_React$Component4){_inherits(StretchForm,_React$Component4);function StretchForm(){_classCallCheck(this,StretchForm);return _possibleConstructorReturn(this,_getPrototypeOf(StretchForm).apply(this,arguments));}_createClass(StretchForm,[{key:\"render\",value:function render(){return React.createElement(\"form\",{className:\"myForm\"},React.createElement(\"label\",null,\"Stretch 25% vertically?:\",React.createElement(\"input\",{type:\"checkbox\",onChange:this.props.onChange})));}}]);return StretchForm;}(React.Component);//TODO: Change hardcoded max images for loading to variable\nvar ProcessButton=/*#__PURE__*/function(_React$Component5){_inherits(ProcessButton,_React$Component5);function ProcessButton(){_classCallCheck(this,ProcessButton);return _possibleConstructorReturn(this,_getPrototypeOf(ProcessButton).apply(this,arguments));}_createClass(ProcessButton,[{key:\"render\",value:function render(){var _this=this;return React.createElement(\"div\",null,React.createElement(\"button\",{className:\"myButton\",onClick:function onClick(){return _this.props.onClick();}},\"Process Logo\"),\"Loaded \",this.props.imagesLoaded,\"/26 images\");}}]);return ProcessButton;}(React.Component);var SubmitButton=/*#__PURE__*/function(_React$Component6){_inherits(SubmitButton,_React$Component6);function SubmitButton(){_classCallCheck(this,SubmitButton);return _possibleConstructorReturn(this,_getPrototypeOf(SubmitButton).apply(this,arguments));}_createClass(SubmitButton,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"button\",{className:\"myButton\",onClick:function onClick(){return _this2.props.onClick();}},\"Submit Link\");}}]);return SubmitButton;}(React.Component);var DownloadButton=/*#__PURE__*/function(_React$Component7){_inherits(DownloadButton,_React$Component7);function DownloadButton(){_classCallCheck(this,DownloadButton);return _possibleConstructorReturn(this,_getPrototypeOf(DownloadButton).apply(this,arguments));}_createClass(DownloadButton,[{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"button\",{onClick:function onClick(){return _this3.props.onClick();}},\"Download BMP\");}}]);return DownloadButton;}(React.Component);var ColorChangeButton=/*#__PURE__*/function(_React$Component8){_inherits(ColorChangeButton,_React$Component8);function ColorChangeButton(){_classCallCheck(this,ColorChangeButton);return _possibleConstructorReturn(this,_getPrototypeOf(ColorChangeButton).apply(this,arguments));}_createClass(ColorChangeButton,[{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"button\",{className:\"myButton\",onClick:function onClick(){return _this4.props.onClick();}},\"Replace Colors Only\");}}]);return ColorChangeButton;}(React.Component);//-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\nvar Editor=/*#__PURE__*/function(_React$Component9){_inherits(Editor,_React$Component9);function Editor(props){var _this5;_classCallCheck(this,Editor);_this5=_possibleConstructorReturn(this,_getPrototypeOf(Editor).call(this,props));_this5.handleProcessButtonClick=function(){//Format: posterize[bool], posterize value, scale[bool], scaleX, scaleY, stretch[bool], greyscale[bool], numColors\n//TODO: format better, into a function or something\n//      these function calls end up being \"jumbled\", i think due to the async setState,\n//      so it is difficult to know which is what output in the array\n//Scale : Color Correction\n_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch);//Scale : Greyscale : Color Correction\n_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,true);//Scale : Color Correction (Reduction)\n_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,5);_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],false,0,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,2);//Scale : Posterize : Color Correction\n_this5.jimpLogoCreation(_this5.state.output[0],true,7,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch);_this5.jimpLogoCreation(_this5.state.output[0],true,5,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch);_this5.jimpLogoCreation(_this5.state.output[0],true,3,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch);_this5.jimpLogoCreation(_this5.state.output[0],true,2,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch);//Scale : Posterize : Color Correction (Reduction)\n_this5.jimpLogoCreation(_this5.state.output[0],true,7,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,5);_this5.jimpLogoCreation(_this5.state.output[0],true,7,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],true,7,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],true,7,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,2);_this5.jimpLogoCreation(_this5.state.output[0],true,5,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,5);_this5.jimpLogoCreation(_this5.state.output[0],true,5,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],true,5,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],true,5,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],true,3,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,5);_this5.jimpLogoCreation(_this5.state.output[0],true,3,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],true,3,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],true,3,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],true,2,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,5);_this5.jimpLogoCreation(_this5.state.output[0],true,2,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,4);_this5.jimpLogoCreation(_this5.state.output[0],true,2,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,3);_this5.jimpLogoCreation(_this5.state.output[0],true,2,true,_this5.state.scaleX,_this5.state.scaleY,_this5.state.stretch,false,2);};_this5.handleColorChangeButtonClick=function(i){//NOTE - THIS RETURNS THE VALUE, NO NEED FOR .VALUE\nconsole.log(\"sdfsdf\");_this5.jimpLogoCreation(_this5.state.output[0],false,0,false,0,0,false);};_this5.handleSubmitButtonClick=function(i){console.log(\"Submit Button Clicked\");_this5.setState({output:[_this5.state.dropboxLink]});};_this5.handleDownloadButtonClick=function(i){console.log(\"Download Button Clicked\");};_this5.handleLinkChange=function(i){_this5.setState({dropboxLink:\"https://cors-anywhere.herokuapp.com/\"+i.target.value.slice(0,-1)+\"1\"});};_this5.state={//value that holds the path to default image, then the base64 data of render\n//base64 used by Jimp, since it is a web-based app. Local files caused issues.\npicture:src,//Array of output pictures\noutput:[],dropboxLink:\"\",scaleX:0,scaleY:0,imagesLoaded:0,stretch:false};_this5.myRef=React.createRef();//TODO: Bind these functions in their declaration, similar to handleX functions\n_this5.onDrop=_this5.onDrop.bind(_assertThisInitialized(_this5));_this5.onScaleFormChangeX=_this5.onScaleFormChangeX.bind(_assertThisInitialized(_this5));_this5.onScaleFormChangeY=_this5.onScaleFormChangeY.bind(_assertThisInitialized(_this5));_this5.onStretchFormChange=_this5.onStretchFormChange.bind(_assertThisInitialized(_this5));return _this5;}_createClass(Editor,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevState.output!==this.state.output){console.log(\"output state has changed: \"+this.state.output[0]);}}//-------------------------------------------------------------\n//Functions to handle events when different buttons are clicked\n//or values are changed\n//-------------------------------------------------------------\n},{key:\"onDrop\",//picture is an array passed from image uploader\n//pull most recently uploaded picture from current session\n//TODO: reformat these functions into handleDrop and handleLinkChange\nvalue:function onDrop(picture){//TODO: Insert function calls directly here to auto work on image\nvar localImg=URL.createObjectURL(picture[picture.length-1]);//Set state for display\nthis.setState({output:[URL.createObjectURL(picture[picture.length-1])]});}},{key:\"onScaleFormChangeX\",value:function onScaleFormChangeX(event){//form takes in a string, need to parse into an Int for use in Jimp\nthis.setState({scaleX:parseInt(event.target.value,10)});}},{key:\"onScaleFormChangeY\",value:function onScaleFormChangeY(event){//form takes in a string, need to parse into an Int for use in Jimp\nthis.setState({scaleY:parseInt(event.target.value,10)});}},{key:\"onStretchFormChange\",value:function onStretchFormChange(event){//console.log(event.target.checked);\nthis.setState({stretch:event.target.checked});}//-------------------------------------------------------------\n//render functions for each visible element\n//TODO: combine everything in the same div into one render function\n//like buttons for control panel and such\n//-------------------------------------------------------------\n},{key:\"renderLogoImage\",value:function renderLogoImage(){if(this.state.output[0]!==undefined)return React.createElement(\"div\",null,React.createElement(DisplayLogoImg,{picture:this.state.picture,output:this.state.output}));}},{key:\"renderProcessButton\",value:function renderProcessButton(i){return React.createElement(ProcessButton,{onClick:this.handleProcessButtonClick,imagesLoaded:this.state.imagesLoaded});}},{key:\"renderSubmitButton\",value:function renderSubmitButton(i){return React.createElement(SubmitButton,{onClick:this.handleSubmitButtonClick});}},{key:\"renderDownloadButton\",value:function renderDownloadButton(i){return React.createElement(DownloadButton,{onClick:this.handleDownloadButtonClick});}},{key:\"renderColorChangeButton\",value:function renderColorChangeButton(i){return React.createElement(ColorChangeButton,{onClick:this.handleColorChangeButtonClick});}},{key:\"renderScaleForm\",value:function renderScaleForm(i){return React.createElement(ScaleForm,{onChangeX:this.onScaleFormChangeX,onChangeY:this.onScaleFormChangeY});}},{key:\"renderStretchForm\",value:function renderStretchForm(i){return React.createElement(StretchForm,{onChange:this.onStretchFormChange});}},{key:\"renderImageUploader\",value:function renderImageUploader(){return React.createElement(ImageUploader,{withIcon:true,buttonText:\"Choose image\",label:\"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\",fileContainerStyle:{backgroundColor:\"grey\"},singleImage:true,onChange:this.onDrop,imgExtension:['.jpg','.gif','.png','.bmp'],maxFileSize:5242880});}},{key:\"renderLinkForm\",value:function renderLinkForm(){return React.createElement(Linkform,{onChange:this.handleLinkChange});}//-------------------------------------------------------------\n//Functions to do the actual editing on the image\n//-------------------------------------------------------------\n},{key:\"jimpLogoCreation\",value:function jimpLogoCreation(path,posBool,pos,scale,scaleX,scaleY,stretch,grayscale,numColors){jimp.read(path,function(err,image){//create local array of colors and populate it from global\n//TODO: Check if need to unallocate memory here\nvar localColors=new Array(54);if(localColors[0]===undefined){for(var i=0;i<colorsArray.length;i++){localColors[i]=colorsArray[i];}}if(scale){if(scaleX===0){if(scaleY===0){//if both fields are not input, scale to 100 X and scale Y according to aspect ratio\nconsole.log(\"Found no size variables\");image.resize(100,jimp.AUTO);}else{//if only the Y vaue is input,\nconsole.log(\"Only found y value\");image.resize(jimp.AUTO,scaleY);}}else if(scaleY===0){if(scaleX===0){//if both fields are not input, scale to 100 X and scale Y according to aspect ratio\nconsole.log(\"Found no size variables\");image.resize(100,jimp.AUTO);}else{//if only the X vaue is input,\nconsole.log(\"Only found x value\");image.resize(scaleX,jimp.AUTO);}}//if both values are input\nelse{console.log(\"Found both size variables\");image.resize(scaleX,scaleY);}}if(stretch){var newHeight=Math.round(image.bitmap.height*1.25);image.resize(image.bitmap.width,newHeight);console.log(\"Image stretched\");}if(posBool)image.posterize(pos);if(grayscale)image.greyscale();//initialize getNewColor with new colorsArray\nvar getFirstColor=nearestColor.from(colorsArray);//function to scan for most popular colors in image, only do on first run\nif(firstrun){console.log('Calculating most popular colors....');image.scan(0,0,image.bitmap.width,image.bitmap.height,function(x,y,idx){//First log RGB value of current pixel, toString(16) converts\n//into hex form, padStart for 1 digit values\n//var position = [x, y];\n//red\nvar red=this.bitmap.data[idx];var redHex=red.toString(16).padStart(2,\"0\");//green\nvar green=this.bitmap.data[idx+1];var greenHex=green.toString(16).padStart(2,\"0\");//blue\nvar blue=this.bitmap.data[idx+2];var blueHex=blue.toString(16).padStart(2,\"0\");//Run nearestColor on this pixel\nvar close=getFirstColor('#'+redHex+greenHex+blueHex);//future timesave: Don't run this every time, only log frequency\n//the first time you parse the image\nfor(var i=0;i<colorsFreq.length;i++){if(colorsFreq[i][0]===close){colorsFreq[i][1]++;}}});firstrun=false;//sort colorsFreq by frequency\ncolorsFreq.sort(sortFunction);function sortFunction(a,b){if(a[1]===b[1]){return 0;}else{return a[1]>b[1]?-1:1;}}}if(numColors!==undefined){localColors.length=numColors;//update colorsArray with new color order,\n//important for removing correct colors when downsizing\nfor(var i=0;i<numColors;i++){localColors[i]=colorsFreq[i][0];}console.log(\"localColors Updated: \"+localColors);}//\nvar getNewColor=nearestColor.from(localColors);//Function to replace colors with our palette\nimage.scan(0,0,image.bitmap.width,image.bitmap.height,function(x,y,idx){//First log RGB value of current pixel, toString(16) converts\n//into hex form, padStart for 1 digit values\n//var position = [x, y];\n//red\nvar red=this.bitmap.data[idx];var redHex=red.toString(16).padStart(2,\"0\");//green\nvar green=this.bitmap.data[idx+1];var greenHex=green.toString(16).padStart(2,\"0\");//blue\nvar blue=this.bitmap.data[idx+2];var blueHex=blue.toString(16).padStart(2,\"0\");//Run nearestColor on this pixel\nvar close=getNewColor('#'+redHex+greenHex+blueHex);var closeRed=parseInt(close.substr(1,2),16);var closeGreen=parseInt(close.substr(3,2),16);var closeBlue=parseInt(close.substr(5,2),16);//Change pixel colors into nearest from our palette\n//red\nthis.bitmap.data[idx]=closeRed;//green\nthis.bitmap.data[idx+1]=closeGreen;//blue\nthis.bitmap.data[idx+2]=closeBlue;});//add result to output array\nimage.getBase64(Jimp.MIME_BMP,function(err,data){this.setState(function(prevState){return{output:[].concat(_toConsumableArray(prevState.output),[data]),imagesLoaded:prevState.imagesLoaded+1};});console.log(\"image added \"+this.state.imagesLoaded);}.bind(this));//apply edited image to picture state\n/*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n      */}.bind(this));}//-------------------------------------------------------------\n//Final render of the application\n//-------------------------------------------------------------\n},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"panelDisplay\"},this.renderLinkForm(),this.renderSubmitButton(),this.renderImageUploader(),this.renderScaleForm(),this.renderStretchForm(),this.renderProcessButton(),this.renderColorChangeButton()),React.createElement(\"div\",{className:\"workDisplay\"},this.renderLogoImage()));}}]);return Editor;}(React.Component);//-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\nvar App=/*#__PURE__*/function(_React$Component10){_inherits(App,_React$Component10);function App(){_classCallCheck(this,App);return _possibleConstructorReturn(this,_getPrototypeOf(App).apply(this,arguments));}_createClass(App,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"app\"},React.createElement(\"div\",{className:\"app-img\"},React.createElement(Editor,null)),React.createElement(\"div\",{className:\"img-fields\"},React.createElement(\"div\",null)));}}]);return App;}(React.Component);//-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\nReactDOM.render(React.createElement(App,null),document.getElementById('root'));","map":{"version":3,"sources":["/Users/zakstratton/Documents/logo-processor/src/index.js"],"names":["React","ReactDOM","ImageUploader","Jimp","jimp","require","colors","black","onyx","charcoal","concrete","quicksilver","bleach","rich_brown","mushroom","sand","natural","navy","ultramarine","lagoon","cerulean","cornflower","cyan","peacock","aruba","lake","seafoam","reef","teal","pine","kelly","jade","turf","lime","goldenrod","yellow","sunflower","carmel","clementine","living_coral","persimmon","red_orange","red","burnt_orange","rust","maroon","deep_pink","hibiscus","blush","peach","lavender","iris","purple","royal_purple","moose","violet","green_apple","carrot","lapis","parrot","french_blue","firstrun","colorsFreq","Array","colorsArray","i","length","Object","values","nearestColor","from","src","DisplayLogoImg","props","output","Component","Linkform","onChange","ScaleForm","onChangeX","onChangeY","StretchForm","ProcessButton","onClick","imagesLoaded","SubmitButton","DownloadButton","ColorChangeButton","Editor","handleProcessButtonClick","jimpLogoCreation","state","scaleX","scaleY","stretch","handleColorChangeButtonClick","console","log","handleSubmitButtonClick","setState","dropboxLink","handleDownloadButtonClick","handleLinkChange","target","value","slice","picture","myRef","createRef","onDrop","bind","onScaleFormChangeX","onScaleFormChangeY","onStretchFormChange","prevProps","prevState","localImg","URL","createObjectURL","event","parseInt","checked","undefined","backgroundColor","path","posBool","pos","scale","grayscale","numColors","read","err","image","localColors","resize","AUTO","newHeight","Math","round","bitmap","height","width","posterize","greyscale","getFirstColor","scan","x","y","idx","data","redHex","toString","padStart","green","greenHex","blue","blueHex","close","sort","sortFunction","a","b","getNewColor","closeRed","substr","closeGreen","closeBlue","getBase64","MIME_BMP","renderLinkForm","renderSubmitButton","renderImageUploader","renderScaleForm","renderStretchForm","renderProcessButton","renderColorChangeButton","renderLogoImage","App","render","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style/index.css';\n//import './style/_buttons.scss';\nimport ImageUploader from 'react-images-upload';\nimport Jimp from 'jimp/es';\n\nvar jimp = require('jimp');\n\n\n//Three global color data structures, one a map of objects, one an array,\n//and one a 2D array\n//TODO: Downscale to remove map of objects, unneeded\nvar colors = {\n  black: '#000000',\n  onyx: '#333538',\n  charcoal: '#5f6468',\n  concrete: '#97a0a7',\n  quicksilver: '#e4e5e6',\n  bleach: '#ffffff',\n  rich_brown: '#372820',\n  mushroom: '#716257',\n  sand: '#bab3a0',\n  natural: '#f9f4ec',\n  navy: '#081e2c',\n  ultramarine: '#29217d',\n  lagoon: '#003e66',\n  cerulean: '#0169ca',\n  cornflower: '#529afc',\n  cyan: '#009ff1',\n  peacock: '#01aec9',\n  aruba: '#9dfbe7',\n  lake: '#6ac4dd',\n  seafoam: '#4ca696',\n  reef: '#00947d',\n  teal: '#007171',\n  pine: '#2b4423',\n  kelly: '#21772f',\n  jade: '#14b25a',\n  turf: '#60933b',\n  lime: '#a0ce3e',\n  goldenrod: '#d5d03a',\n  yellow: '#fff71b',\n  sunflower: '#ffc938',\n  carmel: '#d8a15e',\n  clementine: '#ff9a23',\n  living_coral: '#fb686d',\n  persimmon: '#fd5130',\n  red_orange: '#db1d3c',\n  red: '#c50f2d',\n  burnt_orange: '#a84c28',\n  rust: '#763742',\n  maroon: '#581c32',\n  deep_pink: '#c40876',\n  hibiscus: '#de4b9b',\n  blush: '#fdaeca',\n  peach: '#f7bfab',\n  lavender: '#a08dd6',\n  iris: '#77479f',\n  purple: '#5d1e5c',\n  royal_purple: '#401e72',\n  moose: '#653c2c',\n  violet: '#6753b2',\n  green_apple: '#76c727',\n  carrot: '#fd673e',\n  lapis: '#3c2f8f',\n  parrot: '#2fd078',\n  french_blue: '#638ee4',\n};\n\nvar firstrun = true;\n\n//TODO: Move initialization of arrays to seperate function\nvar colorsFreq = new Array(54);\nvar colorsArray = new Array(54);\n\n//Initialize colorsArray\n//load only hex values of colors into an array\nfor (var i = 0; i < colorsArray.length; i++){\n  colorsArray[i] = Object.values(colors)[i];\n}\n\n//make colorsFreq into a 2D array\nfor (var i = 0; i < colorsFreq.length; i++){\n  colorsFreq[i] = new Array(2);\n}\n\n//Initialize colorsFreq\n//copy array into new 2d array, starting with 0 for all frequencies\nfor (var i = 0; i < colorsFreq.length; i++){\n  colorsFreq[i][0] = colorsArray[i];\n  colorsFreq[i][1] = 0;\n}\n\nvar nearestColor = require('nearest-color').from(colors);\n\n//initialize the default image\nconst src = require(\"./test2.jpg\");\n//janky way around CORS policy for getting from dropbox link, pass through cors-anywhere server\n//var dropboxURL = \"0\"\n//var imgFinal = (\"https://cors-anywhere.herokuapp.com/\" + dropboxURL.slice(0, -1) + \"1\");\n\n//-------------------------------------------------------------\n//Main classes for displaying the output image array\n//-------------------------------------------------------------\nclass DisplayLogoImg extends React.Component{\n  render(){\n    return(\n      <div className=\"workDisplay\">\n        <div className=\"gallery\">\n        Source\n          <img className=\"workImage\" src={this.props.output[0]} alt=\"Source\" />\n        </div>\n        <div className=\"gallery\">\n        Results\n          <img className=\"workImage\" src={this.props.output[1]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[2]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #1\" />\n          <img className=\"workImage\" src={this.props.output[2]} alt=\"Result #3\" />\n          <img className=\"workImage\" src={this.props.output[3]} alt=\"Result #4\" />\n          <img className=\"workImage\" src={this.props.output[4]} alt=\"Result #5\" />\n          <img className=\"workImage\" src={this.props.output[5]} alt=\"Result #6\" />\n          <img className=\"workImage\" src={this.props.output[6]} alt=\"Result #7\" />\n          <img className=\"workImage\" src={this.props.output[7]} alt=\"Result #8\" />\n          <img className=\"workImage\" src={this.props.output[8]} alt=\"Result #9\" />\n          <img className=\"workImage\" src={this.props.output[9]} alt=\"Result #10\" />\n          <img className=\"workImage\" src={this.props.output[10]} alt=\"Result #11\" />\n          <img className=\"workImage\" src={this.props.output[11]} alt=\"Result #12\" />\n          <img className=\"workImage\" src={this.props.output[12]} alt=\"Result #13\" />\n          <img className=\"workImage\" src={this.props.output[13]} alt=\"Result #14\" />\n          <img className=\"workImage\" src={this.props.output[14]} alt=\"Result #15\" />\n          <img className=\"workImage\" src={this.props.output[15]} alt=\"Result #16\" />\n          <img className=\"workImage\" src={this.props.output[16]} alt=\"Result #17\" />\n          <img className=\"workImage\" src={this.props.output[17]} alt=\"Result #18\" />\n          <img className=\"workImage\" src={this.props.output[18]} alt=\"Result #19\" />\n          <img className=\"workImage\" src={this.props.output[19]} alt=\"Result #20\" />\n          <img className=\"workImage\" src={this.props.output[20]} alt=\"Result #21\" />\n          <img className=\"workImage\" src={this.props.output[21]} alt=\"Result #22\" />\n          <img className=\"workImage\" src={this.props.output[22]} alt=\"Result #23\" />\n          <img className=\"workImage\" src={this.props.output[23]} alt=\"Result #24\" />\n          <img className=\"workImage\" src={this.props.output[24]} alt=\"Result #25\" />\n          <img className=\"workImage\" src={this.props.output[25]} alt=\"Result #26\" />\n        </div>\n      </div>\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Custom classes for each button, passes state up\n//TODO:   Merge all of one type into a single class? [buttons, forms, etc]\n//        Transfer classes into seperate file and import it\n//-------------------------------------------------------------\n\nclass Linkform extends React.Component {\n  render() {\n    return (\n      <form className=\"myForm\">\n        <label>\n          Dropbox Link:\n          <input type=\"text\" onChange={this.props.onChange}/>\n        </label>\n      </form>\n    );\n  }\n}\n\nclass ScaleForm extends React.Component{\n  render(){\n    return(\n      <form className=\"myForm\">\n        <label>\n          Resize X:\n          <input type=\"number\" onChange={this.props.onChangeX} />\n        </label>\n        <label>\n          Resize Y:\n          <input type=\"number\" onChange={this.props.onChangeY} />\n        </label>\n        Leave blank to keep aspect ratio\n      </form>\n    )\n  }\n}\n\nclass StretchForm extends React.Component{\n  render(){\n    return(\n      <form className=\"myForm\">\n        <label>\n          Stretch 25% vertically?:\n          <input type=\"checkbox\" onChange={this.props.onChange} />\n        </label>\n      </form>\n    )\n  }\n}\n\n//TODO: Change hardcoded max images for loading to variable\nclass ProcessButton extends React.Component{\n  render(){\n    return(\n      <div>\n        <button className=\"myButton\" onClick={() => this.props.onClick()}>Process Logo</button>\n        Loaded {this.props.imagesLoaded}/26 images\n      </div>\n    )\n  }\n}\n\nclass SubmitButton extends React.Component{\n  render(){\n    return(\n      <button className=\"myButton\" onClick={() => this.props.onClick()}>Submit Link</button>\n    )\n  }\n}\n\nclass DownloadButton extends React.Component{\n  render(){\n    return(\n      <button onClick={() => this.props.onClick()}>Download BMP</button>\n    )\n  }\n}\n\nclass ColorChangeButton extends React.Component{\n  render(){\n    return(\n      <button className=\"myButton\" onClick={() => this.props.onClick()}>Replace Colors Only</button>\n    )\n  }\n}\n\n//-------------------------------------------------------------\n//Main editor app class, contains most info in state\n//-------------------------------------------------------------\nclass Editor extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      //value that holds the path to default image, then the base64 data of render\n      //base64 used by Jimp, since it is a web-based app. Local files caused issues.\n      picture: src,\n      //Array of output pictures\n      output: [],\n      dropboxLink: \"\",\n      scaleX: 0,\n      scaleY: 0,\n      imagesLoaded: 0,\n      stretch: false,\n    };\n    this.myRef = React.createRef();\n    //TODO: Bind these functions in their declaration, similar to handleX functions\n    this.onDrop = this.onDrop.bind(this);\n    this.onScaleFormChangeX = this.onScaleFormChangeX.bind(this);\n    this.onScaleFormChangeY = this.onScaleFormChangeY.bind(this);\n    this.onStretchFormChange = this.onStretchFormChange.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState){\n    if (prevState.output !== this.state.output){\n      console.log(\"output state has changed: \" + this.state.output[0]);\n    }\n  }\n\n  //-------------------------------------------------------------\n  //Functions to handle events when different buttons are clicked\n  //or values are changed\n  //-------------------------------------------------------------\n  handleProcessButtonClick = () => {\n      //Format: posterize[bool], posterize value, scale[bool], scaleX, scaleY, stretch[bool], greyscale[bool], numColors\n      //TODO: format better, into a function or something\n      //      these function calls end up being \"jumbled\", i think due to the async setState,\n      //      so it is difficult to know which is what output in the array\n\n      //Scale : Color Correction\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Greyscale : Color Correction\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, true);\n      //Scale : Color Correction (Reduction)\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], false, 0, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      //Scale : Posterize : Color Correction\n      this.jimpLogoCreation(this.state.output[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(this.state.output[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(this.state.output[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      this.jimpLogoCreation(this.state.output[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch);\n      //Scale : Posterize : Color Correction (Reduction)\n      this.jimpLogoCreation(this.state.output[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(this.state.output[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], true, 7, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n      this.jimpLogoCreation(this.state.output[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(this.state.output[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], true, 5, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(this.state.output[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], true, 3, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 5);\n      this.jimpLogoCreation(this.state.output[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 4);\n      this.jimpLogoCreation(this.state.output[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 3);\n      this.jimpLogoCreation(this.state.output[0], true, 2, true, this.state.scaleX, this.state.scaleY, this.state.stretch, false, 2);\n  }\n\n  handleColorChangeButtonClick = (i) => {\n    //NOTE - THIS RETURNS THE VALUE, NO NEED FOR .VALUE\n    console.log(\"sdfsdf\");\n    this.jimpLogoCreation(this.state.output[0], false, 0, false, 0, 0, false);\n\n  }\n\n  handleSubmitButtonClick = (i) => {\n    console.log(\"Submit Button Clicked\");\n    this.setState({\n      output: [this.state.dropboxLink],\n    });\n  }\n\n  handleDownloadButtonClick = (i) => {\n    console.log(\"Download Button Clicked\");\n  }\n\n  handleLinkChange = (i) => {\n    this.setState({\n      dropboxLink: \"https://cors-anywhere.herokuapp.com/\" + i.target.value.slice(0, -1) + \"1\",\n    });\n  }\n\n  //picture is an array passed from image uploader\n  //pull most recently uploaded picture from current session\n  //TODO: reformat these functions into handleDrop and handleLinkChange\n  onDrop(picture){\n    //TODO: Insert function calls directly here to auto work on image\n    var localImg = URL.createObjectURL(picture[picture.length - 1]);\n    //Set state for display\n    this.setState({\n      output: [URL.createObjectURL(picture[picture.length - 1])],\n    });\n  }\n\n  onScaleFormChangeX(event){\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleX: parseInt(event.target.value, 10)\n    });\n  }\n\n  onScaleFormChangeY(event){\n    //form takes in a string, need to parse into an Int for use in Jimp\n    this.setState({\n      scaleY: parseInt(event.target.value, 10)\n    });\n  }\n\n  onStretchFormChange(event){\n    //console.log(event.target.checked);\n    this.setState({\n      stretch: event.target.checked,\n    });\n  }\n\n  //-------------------------------------------------------------\n  //render functions for each visible element\n  //TODO: combine everything in the same div into one render function\n  //like buttons for control panel and such\n  //-------------------------------------------------------------\n\n  renderLogoImage(){\n    if (this.state.output[0] !== undefined)\n    return (\n      <div>\n        <DisplayLogoImg\n          picture={this.state.picture}\n          output={this.state.output}\n        />\n      </div>\n    )\n  }\n\n  renderProcessButton(i){\n    return(\n      <ProcessButton\n        onClick={this.handleProcessButtonClick}\n        imagesLoaded={this.state.imagesLoaded}\n      />\n    )\n  }\n\n  renderSubmitButton(i){\n    return(\n      <SubmitButton\n        onClick={this.handleSubmitButtonClick}\n      />\n    )\n  }\n\n  renderDownloadButton(i){\n    return(\n      <DownloadButton\n        onClick={this.handleDownloadButtonClick}\n      />\n    )\n  }\n\n  renderColorChangeButton(i){\n    return(\n      <ColorChangeButton\n        onClick={this.handleColorChangeButtonClick}\n      />\n    )\n  }\n\n  renderScaleForm(i){\n    return(\n      <ScaleForm\n        onChangeX={this.onScaleFormChangeX}\n        onChangeY={this.onScaleFormChangeY}\n      />\n    )\n  }\n\n  renderStretchForm(i){\n    return(\n      <StretchForm\n        onChange={this.onStretchFormChange}\n      />\n    )\n  }\n\n  renderImageUploader(){\n    return(\n      <ImageUploader\n        withIcon={true}\n        buttonText='Choose image'\n        label=\"Max file size: 5mb, Filetypes accepted: .bmp | .jpg | .png\"\n        fileContainerStyle={{backgroundColor: \"grey\"}}\n        singleImage={true}\n        onChange={this.onDrop}\n        imgExtension={['.jpg', '.gif', '.png', '.bmp']}\n        maxFileSize={5242880}\n      />\n    )\n  }\n\n  renderLinkForm(){\n    return(\n      <Linkform onChange={this.handleLinkChange}/>\n    )\n  }\n\n\n  //-------------------------------------------------------------\n  //Functions to do the actual editing on the image\n  //-------------------------------------------------------------\n  jimpLogoCreation(path, posBool, pos, scale, scaleX, scaleY, stretch, grayscale, numColors){\n    jimp.read(path, function(err, image) {\n      //create local array of colors and populate it from global\n      //TODO: Check if need to unallocate memory here\n      var localColors = new Array(54);\n      if (localColors[0] === undefined){\n        for (var i = 0; i < colorsArray.length; i++){\n          localColors[i] = colorsArray[i];\n        }\n      }\n\n      if (scale){\n        if (scaleX === 0){\n          if (scaleY === 0){\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          }\n          else {\n            //if only the Y vaue is input,\n            console.log(\"Only found y value\");\n            image.resize(jimp.AUTO, scaleY);\n          }\n        }\n        else if (scaleY === 0){\n          if (scaleX === 0){\n            //if both fields are not input, scale to 100 X and scale Y according to aspect ratio\n            console.log(\"Found no size variables\");\n            image.resize(100, jimp.AUTO);\n          }\n          else {\n            //if only the X vaue is input,\n            console.log(\"Only found x value\");\n            image.resize(scaleX, jimp.AUTO);\n          }\n        }\n        //if both values are input\n        else {\n          console.log(\"Found both size variables\");\n          image.resize(scaleX, scaleY);\n        }\n      }\n      if (stretch){\n        var newHeight = Math.round(image.bitmap.height * 1.25);\n        image.resize(image.bitmap.width, newHeight);\n        console.log(\"Image stretched\");\n      }\n\n      if (posBool)\n        image.posterize(pos);\n      if (grayscale)\n        image.greyscale();\n\n      //initialize getNewColor with new colorsArray\n      var getFirstColor = nearestColor.from(colorsArray);\n\n      //function to scan for most popular colors in image, only do on first run\n      if (firstrun){\n        console.log('Calculating most popular colors....')\n        image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n          //First log RGB value of current pixel, toString(16) converts\n          //into hex form, padStart for 1 digit values\n          //var position = [x, y];\n          //red\n          var red = this.bitmap.data[idx];\n          var redHex = red.toString(16).padStart(2, \"0\");\n          //green\n          var green = this.bitmap.data[idx + 1];\n          var greenHex = green.toString(16).padStart(2, \"0\");\n          //blue\n          var blue = this.bitmap.data[idx + 2];\n          var blueHex = blue.toString(16).padStart(2, \"0\");\n\n          //Run nearestColor on this pixel\n          var close = getFirstColor('#' + redHex + greenHex + blueHex);\n\n          //future timesave: Don't run this every time, only log frequency\n          //the first time you parse the image\n          for (var i = 0; i < colorsFreq.length; i++){\n            if (colorsFreq[i][0] === close){\n              colorsFreq[i][1]++;\n            }\n          }\n        })\n        firstrun = false;\n\n        //sort colorsFreq by frequency\n        colorsFreq.sort(sortFunction);\n        function sortFunction(a, b){\n          if (a[1] === b[1]) {\n            return 0;\n          }\n          else {\n            return (a[1] > b[1]) ? -1 : 1;\n          }\n        }\n      }\n\n      if (numColors !== undefined){\n        localColors.length = numColors;\n        //update colorsArray with new color order,\n        //important for removing correct colors when downsizing\n        for (var i = 0; i < numColors; i++){\n          localColors[i] = colorsFreq[i][0];\n        }\n        console.log(\"localColors Updated: \" + localColors);\n      }\n\n      //\n      var getNewColor = nearestColor.from(localColors);\n\n      //Function to replace colors with our palette\n      image.scan(0, 0, image.bitmap.width, image.bitmap.height, function(x, y, idx) {\n        //First log RGB value of current pixel, toString(16) converts\n        //into hex form, padStart for 1 digit values\n        //var position = [x, y];\n        //red\n        var red = this.bitmap.data[idx];\n        var redHex = red.toString(16).padStart(2, \"0\");\n        //green\n        var green = this.bitmap.data[idx + 1];\n        var greenHex = green.toString(16).padStart(2, \"0\");\n        //blue\n        var blue = this.bitmap.data[idx + 2];\n        var blueHex = blue.toString(16).padStart(2, \"0\");\n\n        //Run nearestColor on this pixel\n        var close = getNewColor('#' + redHex + greenHex + blueHex);\n\n        var closeRed = parseInt(close.substr(1,2), 16);\n        var closeGreen = parseInt(close.substr(3,2), 16);\n        var closeBlue = parseInt(close.substr(5,2), 16);\n\n        //Change pixel colors into nearest from our palette\n        //red\n        this.bitmap.data[idx] = closeRed;\n        //green\n        this.bitmap.data[idx + 1] = closeGreen;\n        //blue\n        this.bitmap.data[idx + 2] = closeBlue;\n      })\n\n      //add result to output array\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState(prevState => ({\n          output: [...prevState.output, data],\n          imagesLoaded: prevState.imagesLoaded + 1,\n        }))\n        console.log(\"image added \" + this.state.imagesLoaded);\n      }.bind(this));\n\n      //apply edited image to picture state\n      /*\n      image.getBase64(Jimp.MIME_BMP, function(err, data){\n        this.setState({\n          picture: data,\n        });\n      }.bind(this));\n      */\n\n\n    }.bind(this));\n  }\n  //-------------------------------------------------------------\n  //Final render of the application\n  //-------------------------------------------------------------\n  render() {\n    return (\n      <div>\n        <div className=\"panelDisplay\">\n          {this.renderLinkForm()}\n          {this.renderSubmitButton()}\n          {this.renderImageUploader()}\n          {this.renderScaleForm()}\n          {this.renderStretchForm()}\n          {this.renderProcessButton()}\n          {this.renderColorChangeButton()}\n        </div>\n        <div className=\"workDisplay\">\n          {this.renderLogoImage()}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Overreaching App class, not nessecary at the moment but may be used later\n//-------------------------------------------------------------\nclass App extends React.Component {\n  render() {\n    return (\n      <div className=\"app\">\n        <div className=\"app-img\">\n          <Editor />\n        </div>\n        <div className=\"img-fields\">\n          <div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n//-------------------------------------------------------------\n//Final DOM render, required by React\n//-------------------------------------------------------------\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}